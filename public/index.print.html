<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.140.0">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="description" content="我们主要采用运营商盒子中的M401A、UNT403A、CM311-1A作为Homeassistant的承载体，可以说这是市场选择的结果：
我们采用的HAOS镜像是冬瓜制作的，能够适配以上运营商电视盒子。而该镜像开始之支持以上三种盒子 运营商电视盒子因其出货量大，因此在二手市场性价比也很高，价格不会太高 晶晨S905l3A芯片，2&#43;16G的配置可以说刚刚好，能够满足大部分的需求，接入200&#43;设备不是问题 安装方式为官方推荐的HAOS，通常民间称之为全功能版本，采用冬瓜制作的镜像，对中国网络环境做了优化，并增加了一些比较适用的Add-ons。">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://localhost:1313/images/hero.png">
    <meta name="twitter:title" content="Homeassistant盒子介绍 :: HaBox 技术支持站">
    <meta name="twitter:description" content="我们主要采用运营商盒子中的M401A、UNT403A、CM311-1A作为Homeassistant的承载体，可以说这是市场选择的结果：
我们采用的HAOS镜像是冬瓜制作的，能够适配以上运营商电视盒子。而该镜像开始之支持以上三种盒子 运营商电视盒子因其出货量大，因此在二手市场性价比也很高，价格不会太高 晶晨S905l3A芯片，2&#43;16G的配置可以说刚刚好，能够满足大部分的需求，接入200&#43;设备不是问题 安装方式为官方推荐的HAOS，通常民间称之为全功能版本，采用冬瓜制作的镜像，对中国网络环境做了优化，并增加了一些比较适用的Add-ons。">
    <meta property="og:url" content="http://localhost:1313/index.html">
    <meta property="og:site_name" content="HaBox 技术支持站">
    <meta property="og:title" content="Homeassistant盒子介绍 :: HaBox 技术支持站">
    <meta property="og:description" content="我们主要采用运营商盒子中的M401A、UNT403A、CM311-1A作为Homeassistant的承载体，可以说这是市场选择的结果：
我们采用的HAOS镜像是冬瓜制作的，能够适配以上运营商电视盒子。而该镜像开始之支持以上三种盒子 运营商电视盒子因其出货量大，因此在二手市场性价比也很高，价格不会太高 晶晨S905l3A芯片，2&#43;16G的配置可以说刚刚好，能够满足大部分的需求，接入200&#43;设备不是问题 安装方式为官方推荐的HAOS，通常民间称之为全功能版本，采用冬瓜制作的镜像，对中国网络环境做了优化，并增加了一些比较适用的Add-ons。">
    <meta property="og:locale" content="zh_cn">
    <meta property="og:type" content="website">
    <meta property="og:image" content="http://localhost:1313/images/hero.png">
    <meta itemprop="name" content="Homeassistant盒子介绍 :: HaBox 技术支持站">
    <meta itemprop="description" content="我们主要采用运营商盒子中的M401A、UNT403A、CM311-1A作为Homeassistant的承载体，可以说这是市场选择的结果：
我们采用的HAOS镜像是冬瓜制作的，能够适配以上运营商电视盒子。而该镜像开始之支持以上三种盒子 运营商电视盒子因其出货量大，因此在二手市场性价比也很高，价格不会太高 晶晨S905l3A芯片，2&#43;16G的配置可以说刚刚好，能够满足大部分的需求，接入200&#43;设备不是问题 安装方式为官方推荐的HAOS，通常民间称之为全功能版本，采用冬瓜制作的镜像，对中国网络环境做了优化，并增加了一些比较适用的Add-ons。">
    <meta itemprop="wordCount" content="297">
    <meta itemprop="image" content="http://localhost:1313/images/hero.png">
    <meta itemprop="keywords" content="Homeassistant,HA Box,Homeassistant盒子">
    <title>Homeassistant盒子介绍 :: HaBox 技术支持站</title>
    <link href="http://localhost:1313/index.html" rel="canonical" type="text/html" title="Homeassistant盒子介绍 :: HaBox 技术支持站">
    <link href="./index.xml" rel="alternate" type="application/rss+xml" title="Homeassistant盒子介绍 :: HaBox 技术支持站"><link rel="icon" href="./images/favicon.png" type="image/png">

    <link href="./css/fontawesome-all.min.css?1734687493" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="./css/fontawesome-all.min.css?1734687493" rel="stylesheet"></noscript>
    <link href="./css/nucleus.css?1734687493" rel="stylesheet">
    <link href="./css/auto-complete.css?1734687493" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="./css/auto-complete.css?1734687493" rel="stylesheet"></noscript>
    <link href="./css/perfect-scrollbar.min.css?1734687493" rel="stylesheet">
    <link href="./css/fonts.css?1734687493" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="./css/fonts.css?1734687493" rel="stylesheet"></noscript>
    <link href="./css/theme.css?1734687493" rel="stylesheet">
    <link href="./css/theme-relearn-auto.css?1734687493" rel="stylesheet" id="R-variant-style">
    <link href="./css/chroma-relearn-auto.css?1734687493" rel="stylesheet" id="R-variant-chroma-style">
    <link href="./css/variant.css?1734687493" rel="stylesheet">
    <link href="./css/print.css?1734687493" rel="stylesheet" media="print">
    <link href="./css/format-print.css?1734687493" rel="stylesheet">
    <script src="./js/variant.js?1734687493"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='.';
      window.relearn.relBaseUri='.';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.index_js_url="./index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red' ] );
      // translations
      window.T_Copy_to_clipboard = `复制到剪贴板`;
      window.T_Copied_to_clipboard = `复制到剪贴板！`;
      window.T_Copy_link_to_clipboard = `将链接复制到剪贴板`;
      window.T_Link_copied_to_clipboard = `链接复制到剪贴板！`;
      window.T_Reset_view = `重置视图`;
      window.T_View_reset = `查看重置！`;
      window.T_No_results_found = `找不到"{0}"的结果`;
      window.T_N_results_found = `为"{0}"找到 {1} 个结果`;
    </script>
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3Jh9XF56OMu5x31r",ck:"3Jh9XF56OMu5x31r"})</script>

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="./index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="导航 (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList">
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><span class="topbar-control"><i class="fa-fw fas fa-chevron-left"></i></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="./installation/index.html" title="1 安装维护 (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable home" tabindex="-1">
        <div class="flex-block-wrapper">

          <article class="home">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/ha-box/index.html">HA Box</a></li>
    <li><a class="term-link" href="./tags/homeassistant/index.html">Homeassistant</a></li>
    <li><a class="term-link" href="./tags/homeassistant%E7%9B%92%E5%AD%90/index.html">Homeassistant盒子</a></li>
  </ul>
</div>
            </header>

<h1 id="homeassistant盒子介绍">Homeassistant盒子介绍</h1>

<p>我们主要采用运营商盒子中的M401A、UNT403A、CM311-1A作为Homeassistant的承载体，可以说这是市场选择的结果：</p>
<ol>
<li>我们采用的HAOS镜像是冬瓜制作的，能够适配以上运营商电视盒子。而该镜像开始之支持以上三种盒子</li>
<li>运营商电视盒子因其出货量大，因此在二手市场性价比也很高，价格不会太高</li>
<li>晶晨S905l3A芯片，2+16G的配置可以说刚刚好，能够满足大部分的需求，接入200+设备不是问题</li>
</ol>
<p>安装方式为官方推荐的HAOS，通常民间称之为全功能版本，采用冬瓜制作的镜像，对中国网络环境做了优化，并增加了一些比较适用的Add-ons。</p>
<p><a href="#R-image-f593ba8d16ce27d6d0fabe65c994e9a6" class="lightbox-link"><img alt="image-20240911155228150" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240911155228150.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f593ba8d16ce27d6d0fabe65c994e9a6"><img alt="image-20240911155228150" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240911155228150.png"></a></p>
<p>当然由于后期冬瓜的HAOS镜像可以适配了更多的盒子，导致市场价格进一步下降，屯了一些M401A和UNT403A，亏大了！</p>
<p>但是不得不说，以上这三种盒子依然是最合适的。闲鱼很多便宜的都是s905l3芯片，个人并不推荐，大家购买的时候要注意看是什么芯片。</p>
<p>先看看大家容易混淆的s905l3和s905l3a芯片的对比</p>
<p><a href="#R-image-0ced654669cec31520c45e758845bd4c" class="lightbox-link"><img alt="image-20240908214739930" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240908214739930.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0ced654669cec31520c45e758845bd4c"><img alt="image-20240908214739930" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240908214739930.png"></a></p>
<h2 id="specification-comparison">Specification comparison:</h2>
<table>
  <thead>
      <tr>
          <th>Processor</th>
          <th><strong>Amlogic S905L3</strong></th>
          <th><strong>Amlogic S905L3A</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Market (main)</td>
          <td>TV Box</td>
          <td>TV Box</td>
      </tr>
      <tr>
          <td>ISA</td>
          <td>ARMv8-A (64-bit)</td>
          <td>ARMv8-A (64-bit)</td>
      </tr>
      <tr>
          <td>Microarchitecture</td>
          <td>Cortex-A53</td>
          <td>Cortex-A53</td>
      </tr>
      <tr>
          <td>Family</td>
          <td>S9</td>
          <td>S9</td>
      </tr>
      <tr>
          <td>Part number(s), S-Spec</td>
          <td>S905L3</td>
          <td>S905L3A</td>
      </tr>
      <tr>
          <td>Release date</td>
          <td>2022 Q4</td>
          <td>2022 Q3</td>
      </tr>
      <tr>
          <td>Lithography</td>
          <td>28 nm HKMG</td>
          <td>12 nm</td>
      </tr>
      <tr>
          <td>Cores</td>
          <td>4</td>
          <td>4</td>
      </tr>
      <tr>
          <td>Threads</td>
          <td>4</td>
          <td>4</td>
      </tr>
      <tr>
          <td>Base frequency</td>
          <td>2,0 GHz</td>
          <td>1,8 GHz</td>
      </tr>
      <tr>
          <td>Turbo frequency</td>
          <td>-</td>
          <td>-</td>
      </tr>
      <tr>
          <td>High performance cores</td>
          <td>4x ARM Cortex-A53 @ 2,0 GHz</td>
          <td>4x ARM Cortex-A53 @ 1,8 GHz</td>
      </tr>
      <tr>
          <td>Cache memory</td>
          <td>1 MB</td>
          <td>1 MB</td>
      </tr>
      <tr>
          <td>Max memory capacity</td>
          <td>4 GB</td>
          <td>4 GB</td>
      </tr>
      <tr>
          <td>Memory types</td>
          <td>LPDDR2/3, DDR3/4</td>
          <td>DDR3/DDR3L-2133, DDR4-2666, LPDDR4-3200</td>
      </tr>
      <tr>
          <td>TDP</td>
          <td>5 W</td>
          <td>5 W</td>
      </tr>
      <tr>
          <td>GPU integrated graphics</td>
          <td><a href="https://gadgetversus.com/graphics-card/arm-mali-450-mp5-specs/" rel="external" target="_self">ARM Mali-450 MP5</a></td>
          <td><a href="https://gadgetversus.com/graphics-card/arm-mali-g31-mp2-specs/" rel="external" target="_self">ARM Mali-G31 MP2</a></td>
      </tr>
      <tr>
          <td>GPU execution units</td>
          <td>5</td>
          <td>2</td>
      </tr>
      <tr>
          <td>GPU shading units</td>
          <td>80</td>
          <td>32</td>
      </tr>
      <tr>
          <td>GPU clock</td>
          <td>750 MHz</td>
          <td>850 MHz</td>
      </tr>
      <tr>
          <td>GPU FP32 floating point</td>
          <td>59,5 GFLOPS</td>
          <td>20,8 GFLOPS</td>
      </tr>
      <tr>
          <td>Socket</td>
          <td>SoC</td>
          <td>SoC</td>
      </tr>
      <tr>
          <td>Drystone MIPS</td>
          <td>18 400 DMIPS</td>
          <td>16 560 DMIPS</td>
      </tr>
      <tr>
          <td>Crypto engine</td>
          <td>-</td>
          <td>AES, DES, TDES, TRNG</td>
      </tr>
      <tr>
          <td>Security</td>
          <td>-</td>
          <td>TrustZone, Secure boot</td>
      </tr>
      <tr>
          <td>Max display resolution</td>
          <td>4K@60fps</td>
          <td>4K@75fps</td>
      </tr>
      <tr>
          <td>Video decoding</td>
          <td>H.265, H.264, 1080p@60fps VP9 4K@60fps</td>
          <td>H.265 4K@75fps, H.264 4K@30fps</td>
      </tr>
      <tr>
          <td>Video encoding</td>
          <td>-</td>
          <td>H.265/H.264 1080p@60fps</td>
      </tr>
      <tr>
          <td>Modem</td>
          <td>10/100M Ethernet</td>
          <td>10/100/1000 MAC, 10/100 PHY</td>
      </tr>
      <tr>
          <td>Connectivity</td>
          <td>USB 2.0, HDMI 2.0</td>
          <td>USB 2.0, USB 3.0, HDMI 2.1</td>
      </tr>
      <tr>
          <td>Wi-Fi</td>
          <td>Wi-Fi 802.11 a/b/g/n/ac</td>
          <td>Wi-Fi/IEEE 802.11 a/b/g/n/ас</td>
      </tr>
      <tr>
          <td>Bluetooth</td>
          <td>Bluetooth 4.2</td>
          <td>Bluetooth 4.1</td>
      </tr>
      <tr>
          <td>Audio</td>
          <td>-</td>
          <td>DAC, SPDIF, I2S, PDM</td>
      </tr>
      <tr>
          <td>AnTuTu</td>
          <td>35 294</td>
          <td>46 026</td>
      </tr>
      <tr>
          <td>(Android) Geekbench 4 single core</td>
          <td>550</td>
          <td>755</td>
      </tr>
      <tr>
          <td>(Android) Geekbench 4 multi-core</td>
          <td>1 578</td>
          <td>2 062</td>
      </tr>
      <tr>
          <td>(Android) Geekbench 5 single core</td>
          <td>105</td>
          <td>130</td>
      </tr>
      <tr>
          <td>(Android) Geekbench 5 multi-core</td>
          <td>266</td>
          <td>434</td>
      </tr>
      <tr>
          <td>(SGEMM) GFLOPS Performance</td>
          <td>4,18 GFLOPS</td>
          <td>5,45 GFLOPS</td>
      </tr>
      <tr>
          <td>(Multi-core / watt performance) Performance / watt ratio</td>
          <td>316 pts / W</td>
          <td>412 pts / W</td>
      </tr>
  </tbody>
</table>
<p>详细的对比数据，请访问 <a href="https://gadgetversus.com/processor/amlogic-s905l3-vs-amlogic-s905l3a/" rel="external" target="_self">https://gadgetversus.com/processor/amlogic-s905l3-vs-amlogic-s905l3a/</a></p>
<p>下面是M401A的几张图片</p>
<p><a href="#R-image-3bd9263ee6beb36dbc6bed66ac7c9cf2" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/202409072117187.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3bd9263ee6beb36dbc6bed66ac7c9cf2"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/202409072117187.png"></a></p>
<p><a href="#R-image-f42c5d98f743f0e0a7173ad55a87ab88" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/202409072117451.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f42c5d98f743f0e0a7173ad55a87ab88"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/202409072117451.png"></a></p>
<p><a href="#R-image-46904f6536c1dc78e7454307a7bab3e5" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/202409072118487.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-46904f6536c1dc78e7454307a7bab3e5"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/202409072118487.png"></a></p>
<p><a href="#R-image-383c2b717df5302d3184007a4ad386f2" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/202409072119320.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-383c2b717df5302d3184007a4ad386f2"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/202409072119320.png"></a></p>
<p><a href="#R-image-c7bbe1f5de3efb753369ae6d678d348d" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/202409072119549.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c7bbe1f5de3efb753369ae6d678d348d"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/202409072119549.png"></a></p>
<p>偶尔也出黑豹X2（panther x2）和x96max+，但是量很少，就不作介绍了，有兴趣的同学自行bing（嗯，不用百度很多年了，世界变得清净了不少）</p>
<ul>
<li>安装维护
<ul>
<li><a href="./installation/instructions/index.html"> HA盒子使用说明书（开箱即用）</a></li>
<li><a href="./installation/wifi/index.html"> 给HA Box插上无线WIFI的翅膀</a></li>
<li><a href="./installation/hacs/index.html">HACS安装激活</a></li>
</ul>
</li>
<li>设备接入
<ul>
<li><a href="./access/homekit/index.html">HA Box桥接米家设备到HomeKit</a></li>
<li><a href="./access/mijia/index.html">将米家设备接入HomeAssistant</a></li>
</ul>
</li>
<li>网络技术
<ul>
<li><a href="./network/habox-over-greatwall/index.html">Ha盒子配置科学上网</a></li>
<li><a href="./network/linux-partition/index.html">linux下无损扩容分区方法</a></li>
<li><a href="./network/docker-pull/index.html">从 Docker Hub 快速拉取镜像</a></li>
<li><a href="./network/free-vless-node/index.html">搭建免费科学上网节点</a></li>
<li><a href="./network/free-remote-control/index.html">远程控制Homeassistant盒子</a></li>
</ul>
</li>
</ul>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">Homeassistant盒子介绍 的子部分</h1>
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第1章</div>

<h1 id="1-安装维护">1 安装维护</h1>

<p>Discover what this Hugo theme is all about and the core-concepts behind it.</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">1 安装维护 的子部分</h1>
          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/homeassistant-box/index.html">Homeassistant Box</a></li>
    <li><a class="term-link" href="./tags/%E5%BC%80%E7%AE%B1/index.html">开箱</a></li>
    <li><a class="term-link" href="./tags/%E8%AF%B4%E6%98%8E%E4%B9%A6/index.html">说明书</a></li>
  </ul>
</div>
            </header>

<h1 id="ha盒子使用说明书开箱即用"> HA盒子使用说明书（开箱即用）</h1>

<p>首先，感谢您选择由“HABox智能家居盒子”提供的Home assistant智能家居盒子，下面请与我一起进入这个神秘的小盒子一探究竟。</p>
<h2 id="等待欢迎界面">等待欢迎界面</h2>
<p>拿到盒子后，连上网线，插上电源，开机……启动并加载完成，大概要等待2分半种。然后在浏览器地址栏输入<a href="http://homeassistant.local:8123/" rel="external" target="_self">http://homeassistant.local:8123</a> 进行访问，不出所料，您将看到如下欢迎界面。（你也可以在路由器后台查看具体ip地址，然后输入<a href="http://ip:8123/" rel="external" target="_self">http://ip:8123</a>进行访问）</p>
<p><a href="#R-image-781ea3a3fee0b52b0ee0db91766b387a" class="lightbox-link"><img alt="202406190942917" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/202406190942917.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-781ea3a3fee0b52b0ee0db91766b387a"><img alt="202406190942917" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/202406190942917.png"></a></p>
<h2 id="基本设置">基本设置</h2>
<h3 id="创建用户">创建用户</h3>
<p><a href="#R-image-75728e94052fc8e0c6b810665dd3d73c" class="lightbox-link"><img alt="202406211526015" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211526015.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-75728e94052fc8e0c6b810665dd3d73c"><img alt="202406211526015" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211526015.png"></a></p>
<h3 id="选择家的位置">选择家的位置</h3>
<p>这个地方如果搜索不到，您可以通过缩放地图，拖动地图中的位置图标到家所在的位置，然后是设置国家选项（如果是通过搜索找到的位置，就没有这个选项，系统自动设置了）</p>
<p><a href="#R-image-e8e6e11146ab16a87d2cc37811b57403" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/e44a5581acae451ff0707c4d898449c3e4e7b897.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e8e6e11146ab16a87d2cc37811b57403"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/e44a5581acae451ff0707c4d898449c3e4e7b897.png"></a></p>
<p><a href="#R-image-bdaf86eede32fac4c9979fe3b9a7e928" class="lightbox-link"><img alt="202406211633570" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211633570.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bdaf86eede32fac4c9979fe3b9a7e928"><img alt="202406211633570" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211633570.png"></a></p>
<h3 id="信息收集">信息收集</h3>
<p>接下来是收集数据，建议不选，然后是自动发现家里的智能设备，直接点完成即可。</p>
<p><a href="#R-image-217d34190be987af29208afff706bb61" class="lightbox-link"><img alt="202406211635332" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211635332.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-217d34190be987af29208afff706bb61"><img alt="202406211635332" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211635332.png"></a></p>
<p><a href="#R-image-805c971e8e3264c7bbbf8fc184d1d9fc" class="lightbox-link"><img alt="202406211635546" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211635546.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-805c971e8e3264c7bbbf8fc184d1d9fc"><img alt="202406211635546" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211635546.png"></a></p>
<h3 id="正式进入后台">正式进入后台</h3>
<p><a href="#R-image-e71910a3aa35e9d39dbacfa42fbfb55c" class="lightbox-link"><img alt="202406211637388" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211637388.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e71910a3aa35e9d39dbacfa42fbfb55c"><img alt="202406211637388" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/202406211637388.png"></a></p>
<h3 id="升级和修复">升级和修复</h3>
<p>您可能会发现左侧配置选项边上有如上图所示的数字提示，点进去</p>
<p>该升级升级，该修复修复</p>
<p><a href="#R-image-5b27857c4e04e78cda5a95e567230c50" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/d2c664e0a2fa27ba6fc97a773560ed5975a97b49.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5b27857c4e04e78cda5a95e567230c50"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/d2c664e0a2fa27ba6fc97a773560ed5975a97b49.png"></a></p>
<p><a href="#R-image-72fd106d705afda4a9b2c9568627ad70" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/0310e4b87dacb4a2aecd2cb2b5d1247dbe2acf54.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-72fd106d705afda4a9b2c9568627ad70"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/0310e4b87dacb4a2aecd2cb2b5d1247dbe2acf54.png"></a></p>
<p><a href="#R-image-0656836fae2c612de3c7949101065810" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/f152df71ed02d594e08f2d4b0bc31e6186aa8d08.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0656836fae2c612de3c7949101065810"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/f152df71ed02d594e08f2d4b0bc31e6186aa8d08.png"></a></p>
<p><a href="#R-image-a4204cb6a1b641e65cf122ca83596632" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/eb2058a97322851ba59fcfe3be5cd3aaa18b84f3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a4204cb6a1b641e65cf122ca83596632"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/eb2058a97322851ba59fcfe3be5cd3aaa18b84f3.png"></a></p>
<h3 id="结束语">结束语</h3>
<p>到此，您基本上就可以根据自身情况进行设备的接入和控制了，请持续关注我们，我们将持续发布使用HomeAssistant盒子相关的使用说明！</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/wifi%E9%85%8D%E7%BD%AE/index.html">Wifi配置</a></li>
    <li><a class="term-link" href="./tags/%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1/index.html">无线网卡</a></li>
  </ul>
</div>
            </header>

<h1 id="给ha-box插上无线wifi的翅膀"> 给HA Box插上无线WIFI的翅膀</h1>

<p>由于我们选用的HA Box盒子是基于M401A,UNT403A,CM311-1A，都没有带无线模块（带无线模块的盒子又不适合做Haomeassistant Box），因此我们采购了一些USB无线网卡802.11n，该网卡可以在HA Box下使用，但是之智能连2.4G网络，如果你2.4G网络没打开，请先在路由器上打开它。</p>
<p><a href="#R-image-c3381f38e68063a0af783cfa18e059f9" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/202409051036273.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c3381f38e68063a0af783cfa18e059f9"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/202409051036273.jpeg"></a></p>
<p>要配置无线网卡，你需要先连上网线，或者接上显示器和键盘。
如果是已连上有线网络，那么在浏览器打开http://homeassistant.local:7681/ （或者用ip访问，比如http://192.168.3.209:7681/ ，请使用你HA Box实际的ip地址替换192.168.3.209），打开后你将看到如下界面</p>
<p><a href="#R-image-9d837ee3e7c6eb8bacd8d9d5e9aa9114" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/80151f8634398af9174d5c9dee81e241ef822a68.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9d837ee3e7c6eb8bacd8d9d5e9aa9114"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/80151f8634398af9174d5c9dee81e241ef822a68.jpeg"></a></p>
<p>当然，如果你没有连有线网络，但是接连显示器和键盘，同样在显示器上你也将看到类似的界面。</p>
<p>在ha&gt;提示符下输入“<strong>login</strong>”然后回车，进入root模式下。</p>
<p>输入 “<strong>ip a</strong>”回车，你将会发现有如下的网卡信息，这就是刚插上的无线网卡了</p>
<blockquote>
<p>wlu2: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000</p>
</blockquote>
<p>好啦，现在我们来设置无线网卡连接信息：
在#提示符下（root模式）输入：
<strong><code>nmcli device wifi</code></strong>
然后回车，将看到能扫描到的wifi信号
<a href="#R-image-43a1e74f2877a6a7133ca41f51d0fe6d" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/202409040903689.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-43a1e74f2877a6a7133ca41f51d0fe6d"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/202409040903689.jpeg"></a></p>
<p>连接wifi的命令如下：</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-perl" data-lang="perl"><span style="display:flex;"><span>nmcli device wifi connect <span style="color:#e6db74">&#34;YOUR_SSID&#34;</span> password <span style="color:#e6db74">&#34;YOUR_WIFI_PASSWORD&#34;</span></span></span></code></pre></div><p>当你看到返回下面的信息时，说明连接成功连。需要注意的是该网卡只支持2.4G频段的wifi信号，如果你家wifi没有支持2.4G频段的信号，将连接失败。</p>
<blockquote>
<p>root@homeassistant:/ # nmcli device wifi connect “liying” password “8888800000”</p>
<p>Device ‘wlu2’ successfully activated with ‘6f2bf3bc-6682-4c84-bd5c-5403d25743c6’.</p>
<p>root@homeassistant:/ #</p>
</blockquote>
<p>当我们再用“ip a”命令查看的是很，发现无线网卡已经有了ip信息</p>
<blockquote>
<p>wlu2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
link/ether 00:e0:4d:2d:14:ca brd ff:ff:ff:ff:ff:ff
inet 192.168.3.210/24 brd 192.168.3.255 scope global dynamic noprefixroute wlu2
valid_lft 86022sec preferred_lft 86022sec
inet6 2409:8a00:78a6:8d94:c868:de7f:dc92:10/128 scope global dynamic noprefixroute
valid_lft 6821sec preferred_lft 3221sec
inet6 2409:8a00:78a6:8d94:a299:4c8b:50fc:8b38/64 scope global dynamic noprefixroute
valid_lft 7179sec preferred_lft 3579sec
inet6 fe80::dba2:e2ad:dd62:784/64 scope link noprefixroute
valid_lft forever preferred_lft forever</p>
</blockquote>
<p>此时，我们就可以用wifi网卡对应的ip访问HA Box了</p>
<blockquote>
<p>http://192.168.3.210:8123/onboarding.html</p>
</blockquote>
<p><a href="#R-image-923c198465a3fd2c533fc6b23987e508" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/e12f5e8e1ebb3fc6d7e9f66a9630f115c7226134.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-923c198465a3fd2c533fc6b23987e508"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/e12f5e8e1ebb3fc6d7e9f66a9630f115c7226134.jpeg"></a></p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/hacs%E5%AE%89%E8%A3%85/index.html">HACS安装</a></li>
    <li><a class="term-link" href="./tags/hacs%E6%BF%80%E6%B4%BB/index.html">HACS激活</a></li>
  </ul>
</div>
            </header>

<h1 id="hacs安装激活">HACS安装激活</h1>

<h2 id="一hacs是什么">一、HACS是什么</h2>
<p>HACS 是一个全面的、社区驱动的<strong>插件管理系统</strong> ，专为Google的开源 智能家居 平台 Home Assistant 设计。 通过HACS，你可以方便地发现、安装和管理与Home Assistant兼容的各种插件，包括自定义集成、面板、配置器和其他小部件。</p>
<h2 id="二安装hacs">二、安装HACS</h2>
<blockquote>
<p>[!WARNING]</p>
<p>注意，激活前，请先在Github注册账号并登陆，否则有的朋友打开激活连接后发现是登陆页面而不是输入激活码的页面。关于怎么注册Github账户，请查看https://blog.csdn.net/2301_76884890/article/details/141474376</p>
</blockquote>
<p>由于Homeassistant的安装五花八门，所以网上有很多教程看上去非常复杂，但是在HA Box中安装HACS非常简单，下面我们一起来看看怎么安装。</p>
<p>配置 - 设备与服务 ，在集成选项卡右下角点<strong>添加集成</strong>按钮</p>
<p><a href="#R-image-305ea34d4d0f7be20566e94d8cf36559" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/646e80ca68cea28649631171ebf4b080391deba2.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-305ea34d4d0f7be20566e94d8cf36559"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/646e80ca68cea28649631171ebf4b080391deba2.jpeg"></a></p>
<p><a href="#R-image-3f6f174ea9a8fa7dea1b4c86ec3bd93f" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/7f8475698172de98cb56982a9863f0dacdef74f3.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3f6f174ea9a8fa7dea1b4c86ec3bd93f"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/7f8475698172de98cb56982a9863f0dacdef74f3.jpeg"></a></p>
<p>在弹出窗口搜索HACS，你将看到HACS已经在列表里，然后点击它（整行随便点就行，右边的几个图标只是告诉你HACS的一些功能）</p>
<p><a href="#R-image-9c0eb7514ed9e60f1a47662b6a0fcc54" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/7ef42a94fe5db252b248df68d3b63a40a7c8f5b9.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9c0eb7514ed9e60f1a47662b6a0fcc54"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/7ef42a94fe5db252b248df68d3b63a40a7c8f5b9.jpeg"></a></p>
<p>全勾选上，然后提交</p>
<p><a href="#R-image-7d6bf729dbddf859aaa445e445b0b589" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/ee51e28640e1ccf768c04cec998f9325200c7452.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7d6bf729dbddf859aaa445e445b0b589"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/ee51e28640e1ccf768c04cec998f9325200c7452.jpeg"></a></p>
<p>接下来是打开链接，进到github.com有个授权的动作</p>
<p><a href="#R-image-46b655c4329b30b4ab85cb36a51df3e6" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/d6a02518146386e9793c52f4200598aa7e8e9a6d.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-46b655c4329b30b4ab85cb36a51df3e6"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/d6a02518146386e9793c52f4200598aa7e8e9a6d.jpeg"></a></p>
<p>不出以外的话，你将看到这个页面，复制刚才弹窗给你的验证码，直接鼠标全选上复制过去直接粘贴，然后点 Continue 继续</p>
<p><a href="#R-image-3211b232bd313528ff247ce2730b2e17" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/096b8d5fab1cbb4372edccd400f22dbf5b22579c.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3211b232bd313528ff247ce2730b2e17"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/096b8d5fab1cbb4372edccd400f22dbf5b22579c.png"></a></p>
<p>有时候会因为种种原因出现下面这个弹窗提示<strong>cloud_not_register</strong>,网络问题直接关闭从头再来多试几次</p>
<p>如果出现下面这个页面说明你刚才的验证码没输错，可以点击Authorize hacs授权了</p>
<p><a href="#R-image-1cc89f03940281ba3e1ecbfd3776f68f" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/f0c8d06fa2176e0832ba8532c56e1b013a2499e7.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1cc89f03940281ba3e1ecbfd3776f68f"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/f0c8d06fa2176e0832ba8532c56e1b013a2499e7.jpeg"></a></p>
<p>OK,到这里说明已经配置成功了，可以关闭这个页面了。</p>
<p><a href="#R-image-5a97b00b72bdc4fa95ef97c297ced968" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/a7f6b1024805fa524a0d85d853081d3c184facda.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5a97b00b72bdc4fa95ef97c297ced968"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/a7f6b1024805fa524a0d85d853081d3c184facda.png"></a></p>
<p>返回到Homeassistant,HACS已经配置成功，并自动发现了家里的一些设备，可以对区域进行配置，告诉HACS这个设备是在客厅还是在卧室或者别的房间。当然你也可以直接点关闭或完成。</p>
<p><a href="#R-image-d22b7fae428f541ed01d5317639a441c" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/eabec53c489ed0f40401fe3d59537fbed6f7d9ec.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d22b7fae428f541ed01d5317639a441c"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/eabec53c489ed0f40401fe3d59537fbed6f7d9ec.png"></a></p>
<p>看，左侧已经出现HACS的连接，集成里面已配置列表已经有HACS了。</p>
<p><a href="#R-image-1035975d603b7354ef71ee6fcfff9fd3" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/d2c535214811638b31d0ebea7cf29975b2ca6e11.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1035975d603b7354ef71ee6fcfff9fd3"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/d2c535214811638b31d0ebea7cf29975b2ca6e11.jpeg"></a></p>
<p>此时你可能需要重启一下HA Box缓解一下激动的心情了</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          </section>
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第1章</div>

<h1 id="2-设备接入">2 设备接入</h1>

<p>Discover what this Hugo theme is all about and the core-concepts behind it.</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">2 设备接入 的子部分</h1>
          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/homeassistant/index.html">Homeassistant</a></li>
    <li><a class="term-link" href="./tags/homekit/index.html">Homekit</a></li>
    <li><a class="term-link" href="./tags/%E7%B1%B3%E5%AE%B6/index.html">米家</a></li>
  </ul>
</div>
            </header>

<h1 id="ha-box桥接米家设备到homekit">HA Box桥接米家设备到HomeKit</h1>

<p><a href="./installation/instructions/index.html">HA Box使用说明书</a></p>
<p><a href="./installation/hacs/index.html">在HA Box 中安装HACS</a></p>
<p><a href="./access/mijia/index.html">将米家设备接入HomeAssistant</a></p>
<p>前提条件是我们已经安装了HACS,如果没有请参考上面的连接安装</p>
<p>接下来，我们通过 HomeKit Bridge 将 Home Assistant 中设备桥接到 HomeKit。</p>
<p>首先，我们要添加 HomeKit Bridge 集成。点击“配置”，进入“设备与服务”页面。在“集成”选项下，点右下角“添加集成”
然后输入“homekit” 或者&quot;apple&quot;</p>
<p><a href="#R-image-5c22bf0266144aace1d7fc336d98b0ea" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/2405b767378b89b3a841ce13334d05cfc9061cf4.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5c22bf0266144aace1d7fc336d98b0ea"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/2405b767378b89b3a841ce13334d05cfc9061cf4.jpeg"></a></p>
<p>点击“Apple”</p>
<p><a href="#R-image-28c0cfe774a30d9296fa74ebce481a9e" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/a0787982f4a5381754deb552770fda923788b729.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-28c0cfe774a30d9296fa74ebce481a9e"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/a0787982f4a5381754deb552770fda923788b729.jpeg"></a></p>
<p>点击添加“HomeKit Bridge 集成”，按照指引完成添加。</p>
<p>需要注意是的，如果你有温湿度传感器，点击“要添加的域”下拉选项，记得勾选“Sensor”，这个选项默认是不勾选的。</p>
<p><a href="#R-image-36b9d786283cfc2c374472bf758cae15" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/b7f3383a80e1a1f04f3b092af7b8d0054d1eaa2a.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-36b9d786283cfc2c374472bf758cae15"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/b7f3383a80e1a1f04f3b092af7b8d0054d1eaa2a.jpeg"></a></p>
<p>添加 HomeKit Bridge 集成成功后，点击界面左下角的通知按钮。查看 homekit 的配对二维码。</p>
<p><a href="#R-image-a49b5a2bcb913414757665a6f64807df" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/b08589161582a58e794c2cb626c3ec44e2299ce0.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a49b5a2bcb913414757665a6f64807df"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/b08589161582a58e794c2cb626c3ec44e2299ce0.jpeg"></a></p>
<p><a href="#R-image-52d6196f5d30272940c771be10f3b03f" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/3718c6668fa3b68c066162da84fe46579fd3c855.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-52d6196f5d30272940c771be10f3b03f"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/3718c6668fa3b68c066162da84fe46579fd3c855.jpeg"></a></p>
<p>打开“家庭”应用，点击左上角的“+”号，选择“添加配件”。扫描上个步骤的得到的二维码，点击“添加到家庭”。在加入过程中，可能会提示“未认证设备”，点击“仍要添加”。然后完成剩余步骤，逐个添加设备。完成后，你就能能用Siri控制你的智能设备了。</p>
<p><a href="#R-image-fcc2c4d3f1c68bbd614ead862e943f2b" class="lightbox-link"><img alt="桥接homekit6.png" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/46651d4a69934aadba8c46c32b8d84a2ac6ce8ce.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fcc2c4d3f1c68bbd614ead862e943f2b"><img alt="桥接homekit6.png" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/46651d4a69934aadba8c46c32b8d84a2ac6ce8ce.jpeg"></a></p>
<p><a href="#R-image-a207f41d89251a40af1a2b46a2f53cb2" class="lightbox-link"><img alt="桥接homekit7.png" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/d9897e682d94ac340ab1a1aff6821f0dd09b2144.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a207f41d89251a40af1a2b46a2f53cb2"><img alt="桥接homekit7.png" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/d9897e682d94ac340ab1a1aff6821f0dd09b2144.jpeg"></a></p>
<p><a href="#R-image-3784b7d5d5da916a9bc0a662a5cdf4e9" class="lightbox-link"><img alt="桥接homekit8.png" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/a07d8ff1e7af35d33193fdba56efa787ba360d89.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3784b7d5d5da916a9bc0a662a5cdf4e9"><img alt="桥接homekit8.png" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/a07d8ff1e7af35d33193fdba56efa787ba360d89.jpeg"></a></p>
<p>大功告成！</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/%E7%B1%B3%E5%AE%B6/index.html">米家</a></li>
    <li><a class="term-link" href="./tags/%E5%B0%8F%E7%B1%B3/index.html">小米</a></li>
  </ul>
</div>
            </header>

<h1 id="将米家设备接入homeassistant">将米家设备接入HomeAssistant</h1>

<p><a href="./installation/instructions/index.html">HA Box使用说明书</a></p>
<p><a href="./installation/hacs/index.html">在HA Box 中安装HACS</a></p>
<p>前提条件是我们已经安装了HACS,如果没有请参考上面的连接安装</p>
<h2 id="1将米家设备接入homeassistant">1将米家设备接入HomeAssistant</h2>
<h3 id="1-安装-xiaomi-miot-atuo">1 安装 Xiaomi Miot Atuo</h3>
<p>接下来，我们需要安装 “Xiaomi Miot Atuo” 集成以将米家设备接入HomeAssistant。</p>
<p>进入 HACS 页面，清除筛选方式（默认只显示已下载的）</p>
<p><a href="#R-image-85b3a8e181cc40514a24da44e9228e43" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/70e2335f30d0ac09481483ab161fd31c8ccdae7d.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-85b3a8e181cc40514a24da44e9228e43"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/70e2335f30d0ac09481483ab161fd31c8ccdae7d.jpeg"></a></p>
<p>然后在搜索框输入“xiaomi miot”，出来后点击它</p>
<p><a href="#R-image-828b5bc591567c57d4496ef8e4eb5cde" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/7dbb3b2832a340b7144704101831281b78997f9a.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-828b5bc591567c57d4496ef8e4eb5cde"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/7dbb3b2832a340b7144704101831281b78997f9a.png"></a></p>
<p>点击右下角DOWNLOAD进行下载</p>
<p><a href="#R-image-54ca6823a809e1090dd8c4ac255bf2ba" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/c2e5a0057e07c7c71caa918194f809e2caa43ed4.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-54ca6823a809e1090dd8c4ac255bf2ba"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/c2e5a0057e07c7c71caa918194f809e2caa43ed4.png"></a></p>
<p><a href="#R-image-340f97a041f1ad6735abc42bec8fe6ef" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/4052018b771c4df4176b353895c0596dcfb258a2.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-340f97a041f1ad6735abc42bec8fe6ef"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/4052018b771c4df4176b353895c0596dcfb258a2.jpeg"></a></p>
<p>安装完集成之后需要重启 HomeAssistant。
配置 → 系统 右上角有重启按钮</p>
<h3 id="2-配置-xiaomi-miot-atuo">2 配置 Xiaomi Miot Atuo</h3>
<p>接下来，我们配置 Xiaomi Miot Atuo 将米家设备接入HomeAssistant。<strong>注意，配置 Xiaomi Miot Atuo 前需要重启 HomeAssistant。</strong></p>
<p>点击“设置”，选择“设备与服务”
切换到 “设备” 选项卡， 然后点击右下角 “添加设备”
然后输入“xiaomi”，然后选择&quot;Xiaomi Miot Auto&quot;</p>
<p><a href="#R-image-dc4953694aca6aea15082fd67d557d9f" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/6522b231a80bf78d487a8fc545347c4b350d2730.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dc4953694aca6aea15082fd67d557d9f"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/6522b231a80bf78d487a8fc545347c4b350d2730.jpeg"></a></p>
<p>选择“账号集成”，登录小米账号获取设备信息。</p>
<p><a href="#R-image-2977ef399c947f081844b134af452e9c" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/cd71249cb01282859a521a8a373a6e5629323f92.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2977ef399c947f081844b134af452e9c"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/cd71249cb01282859a521a8a373a6e5629323f92.jpeg"></a></p>
<p><a href="#R-image-903f135262b9601df3eeba46f9c0a606" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/92f4e0e5a705997eb38b985073bb5c8fa47a881a.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-903f135262b9601df3eeba46f9c0a606"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/92f4e0e5a705997eb38b985073bb5c8fa47a881a.jpeg"></a></p>
<p>按照配置指引完成剩余步骤，
这里可以根据自身情况默认选择排除模式还是包含模式
在设备列表中你想要接入 HomeAssistant 的设备。
排除模式就是将设备列表中没有勾选色设备接入到Homeassistant
包含模式就是将设备列表中已勾选的设备接入到Homeassistant</p>
<p><a href="#R-image-fa984d8ce712d82368ca8375b75509cb" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/c403c5c6840ffcc7de4c78bdedd16c2ade91c357.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fa984d8ce712d82368ca8375b75509cb"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/c403c5c6840ffcc7de4c78bdedd16c2ade91c357.jpeg"></a></p>
<p>接下来就是设置设备所在区域。这样就算是将米家智能设&gt; 备接入进来了。</p>
<blockquote>
<p>上面有一句话：如果想集成网关子设备，请直接选择子设备接入，只接入网关不会自动集成子设备。自己体会，至此就算接入完成了。</p>
</blockquote>
<p>回到概览，就可以看到我们刚才接入的设备了</p>
<p><a href="#R-image-099a834c12d4a749196fa03a5e93586e" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/55cbe342ce51cb278d4599e0061df76d510d5b0b.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-099a834c12d4a749196fa03a5e93586e"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/55cbe342ce51cb278d4599e0061df76d510d5b0b.jpeg"></a></p>
<p>在配置 - 设备与服务中就能看到Xiaomi Miot Auto</p>
<p><a href="#R-image-38c3047066289ef7ed3b092738f5cf22" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/ad4e3cd4220230604a9b3354a652d2566cc1a322.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-38c3047066289ef7ed3b092738f5cf22"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/ad4e3cd4220230604a9b3354a652d2566cc1a322.jpeg"></a></p>
<p>点进去就可以看到接入了多少个设备，多少个实体</p>
<p>我们进入米家插座，就能看到很多信息，并且可以进行更丰富的控制和设置，更多高级的功能，期待你的发现和研究</p>
<p><a href="#R-image-4bdee3f70ed048bf07df2a7d21d06ac2" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/103b0749a541718c1a75e8ecea1cb438338f0ee0.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4bdee3f70ed048bf07df2a7d21d06ac2"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/103b0749a541718c1a75e8ecea1cb438338f0ee0.jpeg"></a></p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          </section>
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第1章</div>

<h1 id="3-网络技术">3 网络技术</h1>

<p>Discover what this Hugo theme is all about and the core-concepts behind it.</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">3 网络技术 的子部分</h1>
          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/cloudflare-tunnel/index.html">Cloudflare Tunnel</a></li>
    <li><a class="term-link" href="./tags/ssh%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/index.html">Ssh内网穿透</a></li>
  </ul>
</div>
            </header>

<h1 id="cloudflare-tunnel配置ssh连接">Cloudflare tunnel配置ssh连接</h1>

<p>这篇文章是给想从公司通过ssh连接到家里面的linux服务器而写的，是基于一个已经刷了armbian系统的电视盒子。当然，通过Ha盒子也是可以实现的。因为我们已经实现了内网穿透，远程控制Ha Box了，可以参考<a href="./network/free-remote-control/index.html">远程控制Homeassistant盒子</a>。只是控制HA Box是通过http协议，而本文是使用ssh协议。</p>
<p>Cloudflare支持很多协议，比如连接到家里Windows电脑的远程桌面，共享存储什么的，下面是它支持的协议。</p>
<ul>
<li>HTTP</li>
<li>HTTPS</li>
<li>UNIX</li>
<li>TCP</li>
<li>SSH</li>
<li>RDP</li>
<li>UNIX+TLS</li>
<li>SMB</li>
<li>HTTP_STATUS</li>
<li>BASTION</li>
</ul>
<h2 id="前提条件">前提条件：</h2>
<p>您已经将域名托管到cloudflare</p>
<p>你使用我们提供的armbian盒子（目前已不再提供，实际上可以是任意一台电脑，Windows、Linux或者Mac OS）</p>
<h2 id="1-开机获取ip地址">1 开机，获取ip地址</h2>
<p>root密码root1234</p>
<p>如果接有显示器，那么登陆后查看ip地址</p>
<p>如果没有接显示器，可以从路由器后台查看主机名为armbian的设备ip</p>
<h2 id="2-创建tunnel">2 创建tunnel</h2>
<p>进入https://one.dash.cloudflare.com/</p>
<p>导航到<strong>Networks</strong> &gt; <strong>Tunnels</strong></p>
<p>然后<strong>Create a tunnel</strong></p>
<p>tunnel type就默认的cloudflare，然后next</p>
<p><a href="#R-image-3063f3bbf3013cd8c40b6c219d817c48" class="lightbox-link"><img alt="image-20240928114211562" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928114211562.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3063f3bbf3013cd8c40b6c219d817c48"><img alt="image-20240928114211562" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928114211562.png"></a></p>
<p>然后设置tunnel name,然后save tunnel</p>
<h2 id="3-安装和配置cloudflared">3 安装和配置cloudflared</h2>
<p>**Choose an operating system:**Debian</p>
<p>**Choose an architecture:**arm64-bit</p>
<p><a href="#R-image-2e030be445f3e05de8a5661860314bfd" class="lightbox-link"><img alt="image-20240928111438949" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928111438949.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2e030be445f3e05de8a5661860314bfd"><img alt="image-20240928111438949" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928111438949.png"></a></p>
<p>安装完成后，点击右下角save</p>
<h2 id="4-配置public-hostname">4 配置Public Hostname</h2>
<p>再回到Tunnels列表，就可以看到刚才创建的Tunnel了，拉到右边有3个点，点它会弹出配置入口<strong>Configure</strong></p>
<p>切换到<strong>Public Hostname</strong></p>
<p>Add a public hostname</p>
<p><a href="#R-image-0dae5b9523288505c06b756cc6359ab9" class="lightbox-link"><img alt="image-20240928111738284" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928111738284.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0dae5b9523288505c06b756cc6359ab9"><img alt="image-20240928111738284" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928111738284.png"></a></p>
<p>同样，在<strong>Public hostnames</strong>列表也是点右边的3个小点进入配置</p>
<h2 id="5-设置private-network">5 设置Private Network</h2>
<p>切换到<strong>Private Network</strong></p>
<p>CIDR：192.168.3.0/24  （根据自身情况填写）</p>
<p>Description：随便</p>
<h2 id="6-回到ssh客户端">6 回到ssh客户端</h2>
<p>ssh客户端的设备也要安装cloudflared</p>
<div class="highlight wrap-code"><pre tabindex="0"><code># 注意ssh客户端所在的系统平台，下面的代码是ubuntu,amd64架构
curl -L --output cloudflared.deb https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb

sudo dpkg -i cloudflared.deb</code></pre></div><p>然后修改~/.ssh/config文件，没有就创建一个，内容如下，我这里配了两个，根据自己情况设置</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>Host ssh.456766.xyz
        ProxyCommand cloudflared access ssh --hostname %h

Host ssh.ha-box.xyz
        ProxyCommand cloudflared access ssh --hostname %h</code></pre></div><h2 id="7-ssh连接远程服务器">7 ssh连接远程服务器</h2>
<p>开启一个终端，执行</p>
<p>ssh <a href="mailto:root@ssh.ha-box.xyz" rel="external" target="_self">root@ssh.ha-box.xyz</a></p>
<p>如果一切顺利，就可以看到下面的信息</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? </code></pre></div>
<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/cloudflare-worker/index.html">Cloudflare Worker</a></li>
    <li><a class="term-link" href="./tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/index.html">科学上网</a></li>
  </ul>
</div>
            </header>

<h1 id="ha盒子配置科学上网">Ha盒子配置科学上网</h1>

<p>前提，你已拥有可以用的梯子（节点），如果没有请参考：</p>
<p><a href="./network/free-vless-node/index.html" title="搭建免费科学上网节点">搭建免费科学上网节点</a></p>
<p>加载项商店搜索&quot;加速&quot;，安装它（实际上就是v2raya,很好用的工具）</p>
<p><a href="#R-image-c794c6b034ca326bd0211d17b00aa14f" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/070adbd5eb8a90dc0647ed13a5c1acd21d457be8.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c794c6b034ca326bd0211d17b00aa14f"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/070adbd5eb8a90dc0647ed13a5c1acd21d457be8.png"></a></p>
<p>安装完后，点启动，配置选项卡可以不用修改默认就行</p>
<p><a href="#R-image-f9eb2ef8be232c7bd45980eaa4be1e9e" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/df3fc21234594a0b1260007e57f8a549aebe0075.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f9eb2ef8be232c7bd45980eaa4be1e9e"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/df3fc21234594a0b1260007e57f8a549aebe0075.png"></a></p>
<p>打开WEB UI，初次进入需要设置用户名密码，设置后请记好了。</p>
<p>导入节点</p>
<p><a href="#R-image-08653d13cac9fd9ffeea76d4ecd88b13" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/35f8c5d6d06e839c5d250ccfcda52ad6d65360c3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-08653d13cac9fd9ffeea76d4ecd88b13"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/35f8c5d6d06e839c5d250ccfcda52ad6d65360c3.png"></a></p>
<p>然后，选择，启动</p>
<p><a href="#R-image-8d884f1c397cf9b13c8fd250feb4873d" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/6039b77ac1aa021955fcb987013cbb0505db3e30.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8d884f1c397cf9b13c8fd250feb4873d"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/6039b77ac1aa021955fcb987013cbb0505db3e30.png"></a></p>
<p>此时，应该就可以用了。开个窗口测试一下
<code>http://homeassistant.local:7681/</code>
进入后输入login 回车
输入curl <a href="https://www.google.com" rel="external" target="_self">www.google.com</a>回车</p>
<p>是不是看到google页面返回的网页源码了？</p>
<p><a href="#R-image-4a3462068149d22ae0c25c98bffe980e" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/61122d3118036f0ece49f011ee703944e86ec39a.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4a3462068149d22ae0c25c98bffe980e"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/61122d3118036f0ece49f011ee703944e86ec39a.jpeg"></a></p>
<p>如果不行，请检查是不是节点或者订阅连接有问题</p>
<p>关于 v2raya的其他配置，请自行bing。</p>
<p>其他电脑想要科学上网，也可以修改网络配置，将网关设置为HA盒子的ip地址，也能通过HA盒子实现科学上网的梦想，实现上网自由。</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/linux/index.html">Linux</a></li>
    <li><a class="term-link" href="./tags/%E6%97%A0%E6%8D%9F%E5%88%86%E5%8C%BA/index.html">无损分区</a></li>
  </ul>
</div>
            </header>

<h1 id="linux下无损扩容分区方法">linux下无损扩容分区方法</h1>

<p>此方法适用于非lvm情景。</p>
<p>用到的命令：parted、resize2fs</p>
<p><strong>特别说明：此方法仅适用于分区扩容（包括根分区），对于缩容的情况不适用，切记！</strong></p>
<p>先确保需要扩容的目标分区后面有一段空白磁盘空间，然后使用磁盘分区工具parted先改变目标分区结束点。</p>
<p>这里假设需要扩容的分区为/dev/sda4，文件系统为ext4，挂载在根节点上，原来的分区结束点为21G ，新结束点为30G</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo parted</code></pre></div><p>这时进入parted 工具界面下，先用print /dev/sda 查看磁盘分区信息和扩容目标分区的编号</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>(parted)print /dev/sda</code></pre></div><p>假如对应的编号为4，使用命令resizepart改变扩容目标分区的结束点</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>(parted)resizepart 4 警告: 分区 /dev/sda4 正被使用。你确定要继续吗? 是/Yes/否/No? yes                                                          结束点？  [21GB]? 30GB</code></pre></div><p>回车，成功后输入quit退出parted 工具界面。</p>
<p>这时目标分区的大小已经变为了30G，但文件系统还未扩展，所以扩展的部分并不能实际使用，接下来使用命令resize2fs扩容文件系统。</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo resize2fs /dev/sda4</code></pre></div><p>这时会把文件系统扩容到增加的空间上。</p>
<p>扩容目标分区完成！</p>
<p>可以使用</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>df -h sudo fdisk -l</code></pre></div><p>等命令查看。</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/docker/index.html">Docker</a></li>
    <li><a class="term-link" href="./tags/docker%E9%95%9C%E5%83%8F/index.html">Docker镜像</a></li>
  </ul>
</div>
            </header>

<h1 id="从-docker-hub-快速拉取镜像">从 Docker Hub 快速拉取镜像</h1>

<p>最近一段时间 Docker 镜像一直是 Pull 不下来的状态，感觉除了挂🪜，想直连 Docker Hub 是几乎不可能的。更糟糕的是，很多原本可靠的国内镜像站，例如一些大厂和高校运营的，也陆续关停了，这对我们这些个人开发者和中小企业来说是挺难受的。之前，通过这些镜像站，我们可以快速、方便地获取所需的 Docker 镜像，现在这条路也不行了。感觉这次动作不小，以后想直接访问 Docker Hub 是不可能了。所以我们得想办法搭建自己的私有镜像仓库。</p>
<p>最近网上有很多解决 Docker Hub 镜像拉不下来的文章，我大概总结一下有以下几种办法：</p>
<h3 id="github-action">Github Action</h3>
<p>利用 Github Action Job 将 Docker Hub 镜像重新打 Tag 推送到阿里云等其他公有云镜像仓库里，这对于需要单个镜像很方便，批量就稍微麻烦一些，如果没🪜Github 访问也是个问题。</p>
<h3 id="cloudflare-worker">CloudFlare Worker</h3>
<p>使用 CloudFlare Worker 对 Docker Hub 的访问请求做中转，这种也是最近使用比较多的，因为个人用户的免费计划每天有10万次免费请求，足够个人和中小企业使用了，实在不够可以花 5$ 购买不限制的。Worker 脚本在网上有很多，随便搜索都有示例。</p>
<p>因为 CloudFlare Worker 默认分配的<code>workers.dev</code>结尾的域名国内根本解析不了，所以要把域名托管在 CloudFlare 上才能正常使用，可以购买 <code>.xyz</code> 等其他费用合适的域名专门用来做代理访问。</p>
<p>但 CloudFlare Worker CDN 经常抽风，有时很快有时很慢，可以借助<a href="https://link.segmentfault.com/?enc=U1IvsdRIl%2Fvc5gYLKxIWTQ%3D%3D.04Dv%2FTKlVsRNVeTy%2F3zonxinTdCx7VKnOwTa6fKOUXlN33sw4uIYOdE9Oajoq4mc" rel="external" target="_self">自选优选IP工具</a>帮助获取访问 CloudFlare 延迟最低的IP，将其写入到你的本地 Hosts 文件中。</p>
<h3 id="自建镜像仓库">自建镜像仓库</h3>
<p>说到自建首先我想到的就是买个配置比较低国外的服务器，搭建个 Nginx 做代理，分享下我配置成功的 Nginx 配置文件：</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  listen <span style="color:#ae81ff">443</span> ssl;
</span></span><span style="display:flex;"><span>  server_name 域名;
</span></span><span style="display:flex;"><span>  ssl_certificate 证书地址;
</span></span><span style="display:flex;"><span>  ssl_certificate_key 密钥地址;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ssl_session_timeout 24h;
</span></span><span style="display:flex;"><span>  ssl_ciphers <span style="color:#e6db74">&#39;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256&#39;</span>;
</span></span><span style="display:flex;"><span>  ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  location / <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    proxy_pass https://registry-1.docker.io;  <span style="color:#75715e"># Docker Hub 的官方镜像仓库</span>
</span></span><span style="display:flex;"><span>    proxy_set_header Host registry-1.docker.io;
</span></span><span style="display:flex;"><span>    proxy_set_header X-Real-IP $remote_addr;
</span></span><span style="display:flex;"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>    proxy_set_header X-Forwarded-Proto $scheme;
</span></span><span style="display:flex;"><span>    proxy_buffering off;
</span></span><span style="display:flex;"><span>    proxy_set_header Authorization $http_authorization;
</span></span><span style="display:flex;"><span>    proxy_pass_header  Authorization;
</span></span><span style="display:flex;"><span>    proxy_intercept_errors on;
</span></span><span style="display:flex;"><span>    recursive_error_pages on;
</span></span><span style="display:flex;"><span>    error_page <span style="color:#ae81ff">301</span> <span style="color:#ae81ff">302</span> 307 <span style="color:#f92672">=</span> @handle_redirect;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  location @handle_redirect <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    resolver 1.1.1.1;
</span></span><span style="display:flex;"><span>    set $saved_redirect_location <span style="color:#e6db74">&#39;$upstream_http_location&#39;</span>;
</span></span><span style="display:flex;"><span>    proxy_pass $saved_redirect_location;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div><p>然后就可以直接用 <code>docker pull 域名/library/nginx:latest</code> 获取镜像了或者配置到 Docker 的<code>daemon.json</code>中。</p>
<p>Nginx 代理的方案你需要能购买到合适的国外服务器，不然网络会很慢。</p>
<p>又或者在国外服务器上搭建 Registry、Nexus、Harbor等镜像仓库，它们具备镜像缓存功能，如果私有镜像仓库中不存在则会去代理服务中获取最新镜像。</p>
<h2 id="建议方案">建议方案</h2>
<p>所以对于个人用户、中小企业来说可以将上述的 <code>CloudFlare Worker</code> + <code>自建镜像仓库</code> 融合起来，本地搭建 Registry、Nexus、Harbor等镜像仓库，在镜像仓库中配置上自己的 <code>CloudFlare Worker</code> <code>Nginx反代</code> 等代理地址或者当前一些可用的其他代理，当本地不存在则会通过这些代理去获取镜像，代理不可用时本地依然能用。</p>
<h3 id="搭建-docker-registry">搭建 Docker Registry</h3>
<p>搭建 Docker Registry 可以参考下述命令：</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -d --restart<span style="color:#f92672">=</span>always --name registry <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-p 443:443
</span></span><span style="display:flex;"><span>-e REGISTRY_PROXY_REMOTEURL<span style="color:#f92672">=</span>https://registry-1.docker.io <span style="color:#ae81ff">\ </span><span style="color:#75715e">#代理的镜像仓库URL</span>
</span></span><span style="display:flex;"><span>-e REGISTRY_HTTP_ADDR<span style="color:#f92672">=</span>0.0.0.0:443 <span style="color:#ae81ff">\ </span><span style="color:#75715e">#监听地址</span>
</span></span><span style="display:flex;"><span>-e REGISTRY_HTTP_HOST<span style="color:#f92672">=</span>https://xxx.cn <span style="color:#ae81ff">\ </span><span style="color:#75715e">#访问域名</span>
</span></span><span style="display:flex;"><span>-e REGISTRY_HTTP_TLS_CERTIFICATE<span style="color:#f92672">=</span>/opt/cert/cert.pem <span style="color:#ae81ff">\ </span><span style="color:#75715e">#域名证书</span>
</span></span><span style="display:flex;"><span>-e REGISTRY_HTTP_TLS_KEY<span style="color:#f92672">=</span>/opt/cert/cert.key <span style="color:#ae81ff">\ </span><span style="color:#75715e">#域名证书</span>
</span></span><span style="display:flex;"><span>-v /opt/cert:/opt/cert <span style="color:#ae81ff">\ </span><span style="color:#75715e">#挂载本地证书到容器中</span>
</span></span><span style="display:flex;"><span>-v /data:/var/lib/registry <span style="color:#ae81ff">\ </span><span style="color:#75715e">#持久化数据目录</span>
</span></span><span style="display:flex;"><span>registry:2</span></span></code></pre></div><h3 id="搭建-nexus">搭建 Nexus</h3>
<p>可选择使用 Docker 命令搭建 <a href="https://link.segmentfault.com/?enc=tbYJWzjSyDQsTkkURfooAQ%3D%3D.QIipXcRsUxqp02x09FrfLCPrKyA3C9SNrkeQCydZtdnSd8CC0luc36yEaTIfkJ8C" rel="external" target="_self">Nexus</a>。</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-apache" data-lang="apache"><span style="display:flex;"><span>docker run -d -p <span style="color:#ae81ff">8081</span>:8081 --name nexus sonatype/nexus3</span></span></code></pre></div><p>或者使用 <a href="https://link.segmentfault.com/?enc=FZchBOKi1qtQY8v1bnXJjw%3D%3D.pGJQ82Ux9WQpeuAt8uqme7hqNpSrSEhuAqUV%2FqA%2F0XIg0LX7UAYua15dLu6eud4ZpuMQpwD5YOON%2FtiFc1AQ2A%3D%3D" rel="external" target="_self">Rainbond</a> 应用商店一键安装。</p>
<p><a href="#R-image-0f27cc0c9f705984f68e42a972b10c60" class="lightbox-link"><img alt="preview" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/view" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0f27cc0c9f705984f68e42a972b10c60"><img alt="preview" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/view"></a></p>
<p>搭建完成后正常登录 Nexus 页面，根据页面引导配置 Docker 相关的存储 Repository 及代理 Repository 即可。</p>
<h3 id="搭建-harbor">搭建 Harbor</h3>
<p>可参考 <a href="https://link.segmentfault.com/?enc=gArRPFlTwahPHAZVYax5eQ%3D%3D.nEIXf3i42IPUpjQpS0rCTWWuYuZuTijmAc5tYh0b0JQ6Rpq%2FgSXPBgpsoxHhenn2" rel="external" target="_self">Harbor文档 </a>搭建或者使用 <a href="https://link.segmentfault.com/?enc=Y8%2FkX9dQK4wkXs1osqCq2Q%3D%3D.Y4NBA%2Fwcm2hd3jymDG3IHKxzC%2BwC7C2hOmQohmPoWdDa6NnnhnrlgpZirSzWOz3yAO6WgEWO0ylpmxJECRtUIw%3D%3D" rel="external" target="_self">Rainbond</a> 应用商店一键安装。</p>
<p><a href="#R-image-fdb7e506f7e4702af37c017b29fff997" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/1460000044981234" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fdb7e506f7e4702af37c017b29fff997"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/1460000044981234"></a></p>
<h2 id="可用的镜像代理">可用的镜像代理</h2>
<p>最近十来天我尝试了很多镜像加速站，整理了以下镜像站目前是可用状态，但可能随时会遇到不可用、关停、访问比较慢的状态，建议同时配置多个镜像源。</p>
<table>
  <thead>
      <tr>
          <th>提供商</th>
          <th>地址</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>DaoCloud</td>
          <td><a href="https://link.segmentfault.com/?enc=FSVjLEsAl%2BdE5y3PPpNn8A%3D%3D.YeXBE%2BxvQ2xpkz0ywiznVXQZgniCO%2F0UAWWsB8Hz0Ew%3D" rel="external" target="_self">https://docker.m.daocloud.io</a></td>
          <td></td>
      </tr>
      <tr>
          <td>阿里云</td>
          <td>https://&lt;your_code&gt;.mirror.aliyuncs.com</td>
          <td>登录阿里云分配</td>
      </tr>
      <tr>
          <td>Docker镜像代理</td>
          <td><a href="https://link.segmentfault.com/?enc=wA9sAMd44Ba%2Bi30i4AX3FA%3D%3D.CIFcbiu06gjjTJAWrPMEZBf%2FwCqfboXDjh%2F4%2FPMmdgo%3D" rel="external" target="_self">https://dockerproxy.com</a></td>
          <td>看运气</td>
      </tr>
      <tr>
          <td>百度云</td>
          <td><a href="https://link.segmentfault.com/?enc=uAfmeE%2FpgUjanDGQSRa9%2BQ%3D%3D.6DfuXOO%2BwVfSCE8RpPZ1IDN%2FSil9v%2Bp9629FU8D34pE%3D" rel="external" target="_self">https://mirror.baidubce.com</a></td>
          <td></td>
      </tr>
      <tr>
          <td>南京大学</td>
          <td><a href="https://link.segmentfault.com/?enc=5TaR9nfjwb%2Ba5BhvoDCvWA%3D%3D.r5H9%2FnalPnIXdJ5CTEr7fhUShCdG%2FMmshkQK47MBrUk%3D" rel="external" target="_self">https://docker.nju.edu.cn</a></td>
          <td></td>
      </tr>
      <tr>
          <td>中科院</td>
          <td><a href="https://link.segmentfault.com/?enc=cpT%2F3jwu8dEoJH47fNtChA%3D%3D.nol19sC4qbKlJ%2BaLFcEkhzXWkFjdmZ9mzR6fg4gCOKY%3D" rel="external" target="_self">https://mirror.iscas.ac.cn</a></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h2 id="福利">福利</h2>
<p>近期 Rainbond 社区也接受到许多用户反馈 Docker 镜像拉不下来，不能构建、打包了，因此 Rainbond 也搭建了个镜像加速服务，采用 <code>CloudFlare + 国外服务器 Nginx 反代</code>的方案为 Rainbond 社区的用户们提供镜像加速服务。</p>
<p><a href="#R-image-5b580c37d03bba3b071bbd6f3a76b38b" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/2261433068-091e79c93c8fa759" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5b580c37d03bba3b071bbd6f3a76b38b"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/2261433068-091e79c93c8fa759"></a></p>
<p>目前速度挺快的（未来不好说</p>
<h3 id="使用方法">使用方法</h3>
<p>1.直接获取 Docker Hub 镜像</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker pull docker.rainbond.cc/library/node:20
</span></span><span style="display:flex;"><span>docker pull docker.rainbond.cc/rainbond/rainbond:v5.17.2-release-allinone</span></span></code></pre></div><p>2.配置镜像加速器</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>tee /etc/docker/daemon.json <span style="color:#e6db74">&lt;&lt;-&#39;EOF&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;registry-mirrors&#34;: [&#34;https://docker.rainbond.cc&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>systemctl daemon-reload
</span></span><span style="display:flex;"><span>systemctl restart docker</span></span></code></pre></div>
<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/cloudflare-worker/index.html">Cloudflare Worker</a></li>
    <li><a class="term-link" href="./tags/%E5%85%8D%E8%B4%B9%E8%8A%82%E7%82%B9/index.html">免费节点</a></li>
  </ul>
</div>
            </header>

<h1 id="搭建免费科学上网节点">搭建免费科学上网节点</h1>

<h2 id="准备物料">准备物料</h2>
<h2 id="1域名一个">1)域名一个</h2>
<p>推荐到<a href="https://www.namesilo.com/" rel="external" target="_self">namesilo.com</a>注册域名，安全、支持支付宝支付、价格便宜，没有陷阱。</p>
<p>注册6位及以上数字的xyz域名（比如456766.xyz），只要$0.99，续费$0.99，注册+续费它9年才$10不到，不用担心域名过期。这也是仅有的成本，简直不要太安逸了。</p>
<h3 id="2准备好cloudflare账号备用">2)准备好Cloudflare账号备用</h3>
<p>打开https://www.cloudflare.com/zh-cn，通过一个电子邮件地址即可注册Cloudflare账号</p>
<h3 id="3准备代码">3)准备代码</h3>
<p><a href="https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js" rel="external" target="_self">https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js</a></p>
<p><a href="https://4i5i-my.sharepoint.com/:u:/g/personal/sosel_4i5i_onmicrosoft_com/EQr1zW3GUINKptRic9MlSKIBOmUXEukBXOzK6oq-ED0QQQ?e=cTDsBR" rel="external" target="_self">备用地址</a> （如果你打开不github的话，可以试试从onedrive下载worker-vless.js文件）</p>
<h2 id="在cloudflare添加网站">在Cloudflare添加网站</h2>
<p>登陆Cloudflare，然后添加网站，就是将你刚注册的域名添加到这里</p>
<p><a href="#R-image-d45732137173d82e92c9d4f47a430673" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/b1c3498eee818656643b898a86c72fcd77eaabd3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d45732137173d82e92c9d4f47a430673"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/b1c3498eee818656643b898a86c72fcd77eaabd3.png"></a></p>
<p>然后选择<strong>免费</strong>的方案就行，如下图，然后<strong>继续</strong></p>
<p><a href="#R-image-549782c4b2956aa2f807fd2be2ee7e4b" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/90241e3e480226358c120d6be86510c2587b268f.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-549782c4b2956aa2f807fd2be2ee7e4b"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/90241e3e480226358c120d6be86510c2587b268f.png"></a></p>
<p>此时我们先不添加DNS，先把域名解析服务器改到Cloudflare，点击左边栏 <strong>DNS</strong>，记下Cloudflare名称服务器地址，你看到的可能和我看到不一定一样，别弄错了。</p>
<p><a href="#R-image-d1bf7b59f88186e15f7ffa11cca983c1" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/619ee5212f9f721c3c60ba3ad41a855f02ccc158.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d1bf7b59f88186e15f7ffa11cca983c1"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/619ee5212f9f721c3c60ba3ad41a855f02ccc158.png"></a></p>
<p>去域名注册平台后台https://www.namesilo.com/account_domains.php</p>
<p><a href="#R-image-2652f03880c50e0609450ae7ebe03c33" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/deaa5b81ad3bc0b61f0a99b1b3309a98d8ef4a77.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2652f03880c50e0609450ae7ebe03c33"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/deaa5b81ad3bc0b61f0a99b1b3309a98d8ef4a77.jpeg"></a></p>
<p>填入Cloudflare的名称服务器地址，然后提交（submit），名称服务器生效可能要等一段时间</p>
<p><a href="#R-image-6872ee2ca6b8520962cbd46fafbc11b7" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/73fd0ce7fd47d3e25d5035f6af78106fd531509a.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6872ee2ca6b8520962cbd46fafbc11b7"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/73fd0ce7fd47d3e25d5035f6af78106fd531509a.png"></a></p>
<h2 id="创建应用程序">创建应用程序</h2>
<p>回到Cloudflare，导航到<strong>Workers 和 Pages</strong> 创建应用程序</p>
<p><a href="#R-image-d487987e7b080b05839a0e46a2f7b7a6" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/6202273f3867236110d6a2a3e9d4a48ba7b52446.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d487987e7b080b05839a0e46a2f7b7a6"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/6202273f3867236110d6a2a3e9d4a48ba7b52446.jpeg"></a></p>
<p><a href="#R-image-8e89b7b9e47945e144ace781103a4741" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/04affed533e6f7184b4c7420b8e3e3f2cb46e6b0.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8e89b7b9e47945e144ace781103a4741"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/04affed533e6f7184b4c7420b8e3e3f2cb46e6b0.png"></a></p>
<p>名称可以随意，完了点击部署按钮，代码先不管它</p>
<p><a href="#R-image-a161eedb4f7c8be87583581eb0e89b51" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/045bcecb3b15412597fef3db606a8de38b5b7c9e.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a161eedb4f7c8be87583581eb0e89b51"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/045bcecb3b15412597fef3db606a8de38b5b7c9e.png"></a></p>
<p>Worker部署成功</p>
<p><a href="#R-image-9737913224325d2df77a12243dc3dac4" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/d592ffaed5f33e6bc9bdadb89267e73e87d09aeb.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9737913224325d2df77a12243dc3dac4"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/d592ffaed5f33e6bc9bdadb89267e73e87d09aeb.png"></a></p>
<h2 id="替换脚本代码">替换脚本代码</h2>
<p>点击编辑代码，将https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js代码复制过来，贴到编辑器里面替换原来的内容</p>
<p>修改两个地方：</p>
<p>1，第7行的userID，随便找个UUID替换，<a href="https://www.uuidgenerator.net/version4" rel="external" target="_self">点击这里获取一个 4</a>，注意用version4，否则会报UUID不合法。</p>
<p>2，第9行的proxyIP，可以找前辈们提供的，随便在下面的列表中找一个</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>cdn-all.xn--b6gac.eu.org cdn.xn--b6gac.eu.org cdn-b100.xn--b6gac.eu.org edgetunnel.anycast.eu.org cdn.anycast.eu.org</code></pre></div><p><em>userID不用改也行 ，userID记在小本本上以后要用</em></p>
<p>proxyIP<em>我测试了也可以不用改，空着就行</em></p>
<p><strong>保存并部署</strong>（按钮在屏幕右上角）</p>
<h2 id="绑定域名">绑定域名</h2>
<p><a href="#R-image-4fd4ed8b6558689e11703b0eea60726a" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/42db9218a49c38b1e5fc04f5a965596776ad3be3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4fd4ed8b6558689e11703b0eea60726a"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/42db9218a49c38b1e5fc04f5a965596776ad3be3.png"></a></p>
<p><a href="#R-image-cafa30871c1157d9208390f063a0fd38" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/67c86bffc006e2047714fe596cd6d07f63abae6f.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-cafa30871c1157d9208390f063a0fd38"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/67c86bffc006e2047714fe596cd6d07f63abae6f.png"></a></p>
<p>自定义域前缀可以随意，根据自己需要填写然后点击“添加自定义域”，等一会儿生效后就可以用了。。。</p>
<h2 id="配置科学上网客户端">配置科学上网客户端</h2>
<p>在浏览器地址栏输入你刚配置的自定义域+代码中配置的userID，得到相应的科学上网的配置参数</p>
<p>比如：https://hi.cntv.chat/6efcf080-745f-42c0-a0e6-4b0f9a2f8f1c</p>
<p><a href="#R-image-69d37d6f26070d13392482496b3f58d9" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/a762dcabf2d2ef2fd003f3bec59942c9ae2d21f0.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-69d37d6f26070d13392482496b3f58d9"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/a762dcabf2d2ef2fd003f3bec59942c9ae2d21f0.png"></a></p>
<p>复制图上标记的内容，到科学上网工具中通过剪贴板导入或手动输入配置参数，注意协议是VLESS。我PC端用的V2rayA，安卓手机用的V2rayNG</p>
<p>好了，本教程到此结束，快去享受免费、快速的、自由的网络去吧！</p>
<p>若有不明白或遇到什么问题，请给我留言。</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="./tags/cloudflare-tunnels/index.html">Cloudflare Tunnels</a></li>
    <li><a class="term-link" href="./tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/index.html">内网穿透</a></li>
    <li><a class="term-link" href="./tags/%E8%BF%9C%E7%A8%8B%E6%8E%A7%E5%88%B6/index.html">远程控制</a></li>
  </ul>
</div>
            </header>

<h1 id="远程控制homeassistant盒子">远程控制Homeassistant盒子</h1>

<p>出门在外，怎样通过网络控制家里的Homeassistant盒子，这是很多购买HA盒子的朋友关心的问题，那么请跟随我的脚步，来看看我们怎么实现！</p>
<p>话不多说，直接开干！</p>
<h2 id="前提条件">前提条件：</h2>
<ol>
<li>你在cloudflare已经注册了账户</li>
<li>你已经注册了域名并且已将DNS解析服务器修改为Cloudflare提供的服务器地址</li>
<li>你已经拥有哈HA 盒子</li>
</ol>
<h2 id="在homeassistant安装cloudflared加载项">在homeassistant安装Cloudflared加载项</h2>
<p>仓库地址：<code>https://github.com/brenner-tobias/addon-cloudflared</code>
进入加载项商店（配置-加载项-加载项商店），点右上角三个小点，然后点仓库</p>
<p><a href="#R-image-3c7aeb59212280955987bbdc7c9ed1c9" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/cda7a9c64acc4809d8466fe304777fea93f45e0c.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3c7aeb59212280955987bbdc7c9ed1c9"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/cda7a9c64acc4809d8466fe304777fea93f45e0c.png"></a></p>
<p>输入 <code>https://github.com/brenner-tobias/ha-addons</code>
然后点添加</p>
<p><a href="#R-image-ffd809b311495fdcbc3bbc927fb3eee9" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/202409042015658.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ffd809b311495fdcbc3bbc927fb3eee9"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/202409042015658.png"></a></p>
<p>添加不成功，这……，需要考虑换个时间再试，或者科学上网</p>
<p><a href="#R-image-37fac961ad05ac7b86c2506d74e53540" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/e376bf93b9fe52bdc9b0bcf5d044a071156e8d5a.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-37fac961ad05ac7b86c2506d74e53540"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/e376bf93b9fe52bdc9b0bcf5d044a071156e8d5a.jpeg"></a></p>
<p>添加成功后，关闭对话框
重新进入加载项商店，搜索cloudflared，就能看到加载项Cloudflared，点它然后安装
<a href="#R-image-07ed66c1260425b181ecfe1f7e3cd22b" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/ef12e66234650b425c567041b7a0baea787a08a9.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-07ed66c1260425b181ecfe1f7e3cd22b"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/ef12e66234650b425c567041b7a0baea787a08a9.png"></a></p>
<p>安装好之后，进入配置选项卡，配置第一项就行，值为要使用的域名（该域名已添加到cloudflare），然后保存</p>
<p><a href="#R-image-3e37dd589a718ec309272136839e7da7" class="lightbox-link"><img alt="image-20241111170823259" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241111170823259.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3e37dd589a718ec309272136839e7da7"><img alt="image-20241111170823259" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241111170823259.png"></a></p>
<p>之后启动该加载项，在日志选项卡里面你将看到如下信息</p>
<p><a href="#R-image-40d3b29c503660518ec3ac6091653235" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/81635a3de25d8b41bf0ecbd780d4acf80a205b9b.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-40d3b29c503660518ec3ac6091653235"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/81635a3de25d8b41bf0ecbd780d4acf80a205b9b.jpeg"></a></p>
<p>拷贝高亮所示的链接地址到浏览器地址栏，并访问。
嗯，点你你需要用来远程访问homeassistant的域名并授权</p>
<p><a href="#R-image-6af616fd820dd0947b536c5f09a38737" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/5299cf9db6074dd5a987b7fd1a09eabf25e2e2dc.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6af616fd820dd0947b536c5f09a38737"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/5299cf9db6074dd5a987b7fd1a09eabf25e2e2dc.png"></a></p>
<p><a href="#R-image-8827a07a01147ad0d695e0412032d8f1" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/2f6ccf280e55f2353c3c5bcdfb123f294e229f7d.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8827a07a01147ad0d695e0412032d8f1"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/2f6ccf280e55f2353c3c5bcdfb123f294e229f7d.png"></a></p>
<p><a href="#R-image-f4608958844461bf5aaaa5a96d94450b" class="lightbox-link"><img class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/4cc884a49914861d78edabd6e2b7382bf653e112.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f4608958844461bf5aaaa5a96d94450b"><img class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/4cc884a49914861d78edabd6e2b7382bf653e112.png"></a></p>
<p>接下来，还有一些事要做</p>
<p>打开连接 <a href="https://one.dash.cloudflare.com/" rel="external" target="_self">https://one.dash.cloudflare.com/</a></p>
<p>导航到左侧边栏 - Networks - Tunnels</p>
<p><a href="#R-image-c2257453994e0055502566787c3c566d" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/c348bb3f2c2797b5d74c8fb875159ddafe531304.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c2257453994e0055502566787c3c566d"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/c348bb3f2c2797b5d74c8fb875159ddafe531304.jpeg"></a></p>
<p>拉到Homeassistant这条记录的最右边，有三个小点，点进去，Configure</p>
<p><a href="#R-image-5ec3294128192063745aac87cff77aff" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/4adc7d14223d9a250a0d0885e7fe5564573d6803.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5ec3294128192063745aac87cff77aff"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/4adc7d14223d9a250a0d0885e7fe5564573d6803.png"></a></p>
<p>也许你需要点右边三小点，Edit进行编辑</p>
<p><a href="#R-image-f14fae8dfa9be1c4b5da6d5417bf84e4" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/0205a3d16cfdbcbdea4c711c03cd571168621645.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f14fae8dfa9be1c4b5da6d5417bf84e4"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/0205a3d16cfdbcbdea4c711c03cd571168621645.jpeg"></a></p>
<p>最后你可以确认下dns是不是已经自动配置好了</p>
<p><a href="#R-image-9c2d9d7e81420e0f95f69ee8542f89f3" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/8b4aa7498406a60ce8d7cb017bb7775b1926e335.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9c2d9d7e81420e0f95f69ee8542f89f3"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/8b4aa7498406a60ce8d7cb017bb7775b1926e335.jpeg"></a></p>
<p>接下来在回到HA盒子，安装加载项File Editor（如果还没安装的话）
然后在/homeassistant/configuration.yaml中添加如下内容</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">http</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">use_x_forwarded_for</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">trusted_proxies</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#ae81ff">172.30.33.0</span><span style="color:#ae81ff">/24</span></span></span></code></pre></div><p><a href="#R-image-734711d09494f26d22400cdeb26bff37" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/64e468b1b83fe3b9a0122105b58b389f6c07910d.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-734711d09494f26d22400cdeb26bff37"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/64e468b1b83fe3b9a0122105b58b389f6c07910d.jpeg"></a></p>
<p>修改完后记得重启下盒子
然后就可以愉快的远程访问啦</p>
<p><a href="#R-image-e9c6a28dd71603810477184afde66b8c" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/4e6b816376cee4395a5794dea3d6eda17aff3b61.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e9c6a28dd71603810477184afde66b8c"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/4e6b816376cee4395a5794dea3d6eda17aff3b61.png"></a></p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          </section>
          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第1章</div>

<h1 id="4-常见问题">4 常见问题</h1>

<p>[TOC]</p>
<h3 id="homeassistant-box忘记密码怎么办">Homeassistant Box忘记密码怎么办？</h3>
<p>如果只是忘记密码，用户名没忘记</p>
<ol>
<li>
<p>在浏览器访问<a href="http://homeassistant.local:7681/" rel="external" target="_self">http://homeassistant.local:7681</a>（或者用ip访问，比如http://192.168.3.198:7681/），</p>
</li>
<li>
<p>在ha提示符后面执行</p>
</li>
</ol>
<p><code>authentication reset --username &quot;用户名&quot; --password &quot;新密码&quot;</code></p>
<p><a href="#R-image-9e2e837e85e2805052389eff43ed17bc" class="lightbox-link"><img alt="image-20241220095851655" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241220095851655.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9e2e837e85e2805052389eff43ed17bc"><img alt="image-20241220095851655" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241220095851655.png"></a></p>
<p>再回到<a href="http://homeassistant.local:8123" rel="external" target="_self">http://homeassistant.local:8123</a>登陆即可</p>
<h3 id="想清除homeassistant-box-账户信息怎么弄">想清除Homeassistant Box 账户信息怎么弄？</h3>
<p>如果用户名和密码都忘记了，或者你就是想单纯的清除账户信息</p>
<ol>
<li>
<p>在浏览器访问<a href="http://homeassistant.local:7681/" rel="external" target="_self">http://homeassistant.local:7681</a>（或者用ip访问，比如http://192.168.3.198:7681/），</p>
</li>
<li>
<p>在ha提示符后输入login回车</p>
</li>
</ol>
<p><a href="#R-image-2647a22cf26543d21b97cfda5404b900" class="lightbox-link"><img alt="image-20241220100347715" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241220100347715.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2647a22cf26543d21b97cfda5404b900"><img alt="image-20241220100347715" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241220100347715.png"></a></p>
<ol start="3">
<li>在#提示符下执行，注意是大写字母C</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>ha-install -C</code></pre></div><p><a href="#R-image-db997fa22418e3ef367ca3f0e7e0af46" class="lightbox-link"><img alt="image-20241220095932222" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241220095932222.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-db997fa22418e3ef367ca3f0e7e0af46"><img alt="image-20241220095932222" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241220095932222.png"></a></p>
<p>再回到<a href="http://homeassistant.local:8123" rel="external" target="_self">http://homeassistant.local:8123</a>登陆即可</p>
<h3 id="重置homeassistant盒子恢复出厂设置">重置Homeassistant盒子，恢复出厂设置</h3>
<ol>
<li>
<p>在浏览器访问<a href="http://homeassistant.local:7681/" rel="external" target="_self">http://homeassistant.local:7681</a>（或者用ip访问，比如http://192.168.3.198:7681/），</p>
</li>
<li>
<p>在ha提示符后输入login回车</p>
</li>
<li>
<p>删除隐藏目录，没有任何提示，删除后执行reboot重启，命令：</p>
</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>rm -rf /mnt/data/supervisor/homeassistant/.storage/
reboot</code></pre></div><p><a href="#R-image-70932df0d4b236a3f4c62f8da76346ef" class="lightbox-link"><img alt="image-20241220171716361" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241220171716361.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-70932df0d4b236a3f4c62f8da76346ef"><img alt="image-20241220171716361" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20241220171716361.png"></a></p>
<h3 id="侧边栏没有supervisor菜单项">侧边栏没有supervisor菜单项</h3>
<ol>
<li>
<p>访问http://homeassistant.local:7681</p>
</li>
<li>
<p>输入login回车，进入root模式</p>
</li>
<li>
<p>输入ha-install -c 强制重配（然后重启系统看看），注意是小写字母c</p>
</li>
</ol>
<h3 id="connect-no-route-to-host">connect: no route to host</h3>
<p>Get “http://supervisor/network/info“: dial tcp 172.30.32.2:80: connect: no route to host</p>
<p>![截图 2024-12-01 18-25-13](<a href="https://pic.456766.xyz/typora/" rel="external" target="_self">https://pic.456766.xyz/typora/</a>截图 2024-12-01 18-25-13.png)</p>
<p>![截图 2024-10-21 17-37-15](<a href="https://pic.456766.xyz/typora/" rel="external" target="_self">https://pic.456766.xyz/typora/</a>截图 2024-10-21 17-37-15.png)</p>
<ol>
<li>
<p>访问<a href="http://homeassistant.local:7681/" rel="external" target="_self">http://homeassistant.local:7681</a></p>
</li>
<li>
<p>ha提示符下输入login回车，执行下面的命令</p>
</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>wget -O - http://ota.wghaos.com/su7 | bash -</code></pre></div><h3 id="home-assistant-cli-not-starting-jump-into-emergency-console">Home Assistant CLI not starting! Jump into emergency console</h3>
<p>这个问题是之前政府大力打击docker的时候常出现的问题，现在应该很少见了</p>
<ol>
<li>
<p>访问<a href="http://homeassistant.local:7681/" rel="external" target="_self">http://homeassistant.local:7681</a></p>
</li>
<li>
<p>输入login回车进入root模式</p>
</li>
<li>
<p>提示符下执行下面三条命令</p>
</li>
</ol>
<div class="highlight wrap-code"><pre tabindex="0"><code>wgturbo docker.io fastgh
wgturbo ghcr.io fastgh
wgturbo apply -D</code></pre></div>
<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第1章</div>

<h1 id="5-关于我们">5 关于我们</h1>

<blockquote>
<p>IT老者，一事无成，闲来无事，喜欢折腾。</p>
<p>HA盒子，找我就行，包您满意，诚信经营。</p>
</blockquote>
<p>大家好！ 我是Peter，一名已过不惑之年的IT工程师。目前有一份可以在家上班的工作，不用早晚挤公交地铁奔波于两点之间，节省了不少空闲 时间，感谢上帝的眷顾。</p>
<p>这两句打油诗是设置闲鱼介绍的时候设置的，贴到这里，姑且作为本站点和闲鱼账户之间的一个见证吧，因为我发现有 不少闲鱼卖家也把本站点放到了他们的商品介绍里面，作为他们提供技术支持的一个途径。</p>
<p>当然，这并没有什么不妥之处，信息共享是一件好事，同时也感谢这些卖家对本站的认可。只是希望大家能够鉴别，他们提供的盒子以及服务和本站没关系！</p>
<blockquote>
<p>感谢冬瓜团队提供的Haos镜像，使得Homeassistant能够在物美价廉的众多盒子上运行，特别是运营商盒子，大大的推动了Homeassistant在中国大发展。</p>
</blockquote>
<h2 id="联系我们"><strong>联系我们</strong></h2>
<p>【闲鱼】<a href="https://m.tb.cn/h.TVTzZg2?tk=eAvn3w5fPRE" rel="external" target="_self">https://m.tb.cn/h.TVTzZg2?tk=eAvn3w5fPRE</a> MF1643 「这是我的闲鱼号，快来看看吧～」
点击链接直接打开</p>
<p><a href="#R-image-9e6cab38b69d1cf8d5f0513b20191b32" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/8EDE0AC1B382FAC66C5DD0BA2DB28F1A-462x1024.jpg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9e6cab38b69d1cf8d5f0513b20191b32"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/8EDE0AC1B382FAC66C5DD0BA2DB28F1A-462x1024.jpg"></a></p>
<p>QQ群</p>
<p><a href="#R-image-fd3e97f52783d742a737c87e526de008" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/qrcode_1733795762228-574x1024.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-fd3e97f52783d742a737c87e526de008"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/qrcode_1733795762228-574x1024.png"></a></p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="./js/clipboard.min.js?1734687493" defer></script>
    <script src="./js/perfect-scrollbar.min.js?1734687493" defer></script>
    <script src="./js/theme.js?1734687493" defer></script>


  </body>
</html>


