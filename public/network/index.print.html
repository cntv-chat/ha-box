<!DOCTYPE html>
<html lang="zh-cn" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.145.0">
    <meta name="generator" content="Relearn 6.0.0+tip">
    <meta name="description" content="Discover what this Hugo theme is all about and the core-concepts behind it.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="http://localhost:1313/images/hero.png">
    <meta name="twitter:title" content="3 网络技术 :: HaBox 技术支持站">
    <meta name="twitter:description" content="Discover what this Hugo theme is all about and the core-concepts behind it.">
    <meta property="og:url" content="http://localhost:1313/network/index.html">
    <meta property="og:site_name" content="HaBox 技术支持站">
    <meta property="og:title" content="3 网络技术 :: HaBox 技术支持站">
    <meta property="og:description" content="Discover what this Hugo theme is all about and the core-concepts behind it.">
    <meta property="og:locale" content="zh_cn">
    <meta property="og:type" content="website">
    <meta property="og:image" content="http://localhost:1313/images/hero.png">
    <meta itemprop="name" content="3 网络技术 :: HaBox 技术支持站">
    <meta itemprop="description" content="Discover what this Hugo theme is all about and the core-concepts behind it.">
    <meta itemprop="wordCount" content="13">
    <meta itemprop="image" content="http://localhost:1313/images/hero.png">
    <title>3 网络技术 :: HaBox 技术支持站</title>
    <link href="http://localhost:1313/network/index.html" rel="canonical" type="text/html" title="3 网络技术 :: HaBox 技术支持站">
    <link href="../network/index.xml" rel="alternate" type="application/rss+xml" title="3 网络技术 :: HaBox 技术支持站"><link rel="icon" href="../images/favicon.png" type="image/png">

    <link href="../css/fontawesome-all.min.css?1743123307" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../css/fontawesome-all.min.css?1743123307" rel="stylesheet"></noscript>
    <link href="../css/nucleus.css?1743123307" rel="stylesheet">
    <link href="../css/auto-complete.css?1743123307" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../css/auto-complete.css?1743123307" rel="stylesheet"></noscript>
    <link href="../css/perfect-scrollbar.min.css?1743123307" rel="stylesheet">
    <link href="../css/fonts.css?1743123307" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../css/fonts.css?1743123307" rel="stylesheet"></noscript>
    <link href="../css/theme.css?1743123307" rel="stylesheet">
    <link href="../css/theme-relearn-auto.css?1743123307" rel="stylesheet" id="R-variant-style">
    <link href="../css/chroma-relearn-auto.css?1743123307" rel="stylesheet" id="R-variant-chroma-style">
    <link href="../css/variant.css?1743123307" rel="stylesheet">
    <link href="../css/print.css?1743123307" rel="stylesheet" media="print">
    <link href="../css/format-print.css?1743123307" rel="stylesheet">
    <script src="../js/variant.js?1743123307"></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.index_js_url="../index.search.js";
      // variant stuff
      window.variants && variants.init( [ 'relearn-auto', 'relearn-light', 'relearn-dark', 'relearn-bright', 'zen-auto', 'zen-light', 'zen-dark', 'retro-auto', 'neon', 'learn', 'blue', 'green', 'red' ] );
      // translations
      window.T_Copy_to_clipboard = `复制到剪贴板`;
      window.T_Copied_to_clipboard = `复制到剪贴板！`;
      window.T_Copy_link_to_clipboard = `将链接复制到剪贴板`;
      window.T_Link_copied_to_clipboard = `链接复制到剪贴板！`;
      window.T_Reset_view = `重置视图`;
      window.T_View_reset = `查看重置！`;
      window.T_No_results_found = `找不到"{0}"的结果`;
      window.T_N_results_found = `为"{0}"找到 {1} 个结果`;
    </script>
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3Jh9XF56OMu5x31r",ck:"3Jh9XF56OMu5x31r"})</script>

  </head>
  <body class="mobile-support print disableInlineCopyToClipboard" data-url="../network/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="导航 (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li
            itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><span itemprop="name">3 网络技术</span><meta itemprop="position" content="1"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../access/mijia/index.html" title="将米家设备接入HomeAssistant (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../network/free-vless-node-page/index.html" title="Cloudflare page搭建免费科学上网节点 (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable chapter narrow" tabindex="-1">
        <div class="flex-block-wrapper">

          <article class="chapter">
            <header class="headline">
            </header>
<div class="article-subheading">第1章</div>

<h1 id="3-网络技术">3 网络技术</h1>

<p>Discover what this Hugo theme is all about and the core-concepts behind it.</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <section>
            <h1 class="a11y-only">3 网络技术 的子部分</h1>
          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../tags/cloudflare-page/index.html">Cloudflare Page</a></li>
    <li><a class="term-link" href="../tags/%E5%85%8D%E8%B4%B9%E8%8A%82%E7%82%B9/index.html">免费节点</a></li>
  </ul>
</div>
            </header>

<h1 id="cloudflare-page搭建免费科学上网节点">Cloudflare page搭建免费科学上网节点</h1>

<h2 id="准备物料">准备物料</h2>
<h3 id="域名一个">域名一个</h3>
<p>推荐到<a href="https://www.namesilo.com/" rel="external" target="_self">namesilo.com</a>注册域名，安全、支持支付宝支付、价格便宜，没有陷阱。</p>
<p>注册6位及以上数字的xyz域名（比如456766.xyz），只要$0.99，续费$0.99，注册+续费它9年才$10不到，不用担心域名过期。这也是仅有的成本，简直不要太安逸了。</p>
<h3 id="准备好github账号和cloudflare账号">准备好Github账号和Cloudflare账号</h3>
<p>打开https://www.cloudflare.com/zh-cn，通过一个电子邮件地址即可注册Cloudflare账号</p>
<p>准备好github账户，不会注册的请自行bing搜索</p>
<h3 id="到github网站fork-edgetunnel项目">到github网站fork edgetunnel项目</h3>
<p>进入项目主页，项目地址：https://github.com/cmliu/edgetunnel，点击fork，弹出页面之间而点Create fork。</p>
<p><a href="#R-image-3b562119d66237b7c605afd41b907d5b" class="lightbox-link"><img alt="image-20241231093044125" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231095158093.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3b562119d66237b7c605afd41b907d5b"><img alt="image-20241231093044125" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231095158093.png"></a></p>
<p><a href="#R-image-39e7d342457c54430b9e8ac64e211bb9" class="lightbox-link"><img alt="image-20241231093217873" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231095209908.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-39e7d342457c54430b9e8ac64e211bb9"><img alt="image-20241231093217873" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231095209908.png"></a></p>
<p><a href="#R-image-5c433e3f1543787b7aa87a4758e6e507" class="lightbox-link"><img alt="image-20241231100658040" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231100828115.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5c433e3f1543787b7aa87a4758e6e507"><img alt="image-20241231100658040" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231100828115.png"></a></p>
<p><a href="#R-image-90b7e3fc7ec4dc6e19de0fb1ef78eaee" class="lightbox-link"><img alt="image-20241231100820318" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231100820346.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-90b7e3fc7ec4dc6e19de0fb1ef78eaee"><img alt="image-20241231100820318" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231100820346.png"></a></p>
<p><a href="#R-image-f9f4d5f697da2e7f6a24fbed43a54552" class="lightbox-link"><img alt="image-20241231101102816" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231101102848.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f9f4d5f697da2e7f6a24fbed43a54552"><img alt="image-20241231101102816" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231101102848.png"></a></p>
<p><a href="#R-image-ebce8ae6341a16b5faef9211295ee76f" class="lightbox-link"><img alt="image-20241231101303456" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231101303489.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ebce8ae6341a16b5faef9211295ee76f"><img alt="image-20241231101303456" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231101303489.png"></a></p>
<p>等待构建和部署完成，然后点<strong>继续处理项目</strong></p>
<p><a href="#R-image-d43219f8cd5c6bdff6e38bb2fb4af287" class="lightbox-link"><img alt="image-20241231101653240" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231101653267.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d43219f8cd5c6bdff6e38bb2fb4af287"><img alt="image-20241231101653240" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231101653267.png"></a></p>
<p><a href="#R-image-ecddd578a6bd9a77001e3f7b0195b3b6" class="lightbox-link"><img alt="image-20241231101751936" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231101751960.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ecddd578a6bd9a77001e3f7b0195b3b6"><img alt="image-20241231101751936" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231101751960.png"></a></p>
<p>上面添加的UUID变量，值可以随便填，不过还是最好稍微复杂一些。</p>
<p><a href="#R-image-8b22c040a568669ef6eb6af6752b8ef0" class="lightbox-link"><img alt="image-20241231101842700" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231101842725.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8b22c040a568669ef6eb6af6752b8ef0"><img alt="image-20241231101842700" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231101842725.png"></a></p>
<p><a href="#R-image-91ed2fbb11ee0fa1456aca4f445bab8d" class="lightbox-link"><img alt="image-20241231101955107" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231101955134.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-91ed2fbb11ee0fa1456aca4f445bab8d"><img alt="image-20241231101955107" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231101955134.png"></a></p>
<p><a href="#R-image-95fa3dbc14e476bc1eb52aca289d1b5c" class="lightbox-link"><img alt="image-20241231102040853" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231102040884.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-95fa3dbc14e476bc1eb52aca289d1b5c"><img alt="image-20241231102040853" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231102040884.png"></a></p>
<p><a href="#R-image-d73905f86ed428e606706e99e9b10a7a" class="lightbox-link"><img alt="image-20241231102144971" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231102144998.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d73905f86ed428e606706e99e9b10a7a"><img alt="image-20241231102144971" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231102144998.png"></a></p>
<p>自定义域激活生效可能要几分钟，先去重新部署一下代码，使之前添加的UUID生效</p>
<p><a href="#R-image-046f2cb4f40f17316c851f60f53f026f" class="lightbox-link"><img alt="image-20241231102235151" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231102235183.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-046f2cb4f40f17316c851f60f53f026f"><img alt="image-20241231102235151" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231102235183.png"></a></p>
<p>重新部署完成后，尝试访问一下，基本上应该可以正常访问了</p>
<p><a href="#R-image-d4fad6b846a8cfcbfb54a9604befc6e5" class="lightbox-link"><img alt="image-20241231102410165" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231102410192.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d4fad6b846a8cfcbfb54a9604befc6e5"><img alt="image-20241231102410165" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231102410192.png"></a></p>
<p>最后将设置的UUID附加到后面访问，即可拿到节点链接，页面往下拉有vless节点链接，别的方式自己研究。</p>
<p><a href="#R-image-ac5635dbca65abe57925f830474f7ec3" class="lightbox-link"><img alt="image-20241231102450991" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/20241231102451020.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ac5635dbca65abe57925f830474f7ec3"><img alt="image-20241231102450991" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/20241231102451020.png"></a></p>
<p>恭喜，到这里就结束了，剩下的自己研究吧，</p>
<p>若有不明白或遇到什么问题，请给我留言。</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../tags/cloudflare-tunnel/index.html">Cloudflare Tunnel</a></li>
    <li><a class="term-link" href="../tags/ssh%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/index.html">Ssh内网穿透</a></li>
  </ul>
</div>
            </header>

<h1 id="cloudflare-tunnel配置ssh连接">Cloudflare tunnel配置ssh连接</h1>

<p>这篇文章是给想从公司通过ssh连接到家里面的linux服务器而写的，是基于一个已经刷了armbian系统的电视盒子。当然，通过Ha盒子也是可以实现的。因为我们已经实现了内网穿透，远程控制Ha Box了，可以参考<a href="../installation/free-remote-control/index.html">远程控制Homeassistant盒子</a>。只是控制HA Box是通过http协议，而本文是使用ssh协议。</p>
<p>Cloudflare支持很多协议，比如连接到家里Windows电脑的远程桌面，共享存储什么的，下面是它支持的协议。</p>
<ul>
<li>HTTP</li>
<li>HTTPS</li>
<li>UNIX</li>
<li>TCP</li>
<li>SSH</li>
<li>RDP</li>
<li>UNIX+TLS</li>
<li>SMB</li>
<li>HTTP_STATUS</li>
<li>BASTION</li>
</ul>
<h2 id="前提条件">前提条件：</h2>
<p>您已经将域名托管到cloudflare</p>
<p>你使用我们提供的armbian盒子（目前已不再提供，实际上可以是任意一台电脑，Windows、Linux或者Mac OS）</p>
<h2 id="1-开机获取ip地址">1 开机，获取ip地址</h2>
<p>root密码root1234</p>
<p>如果接有显示器，那么登陆后查看ip地址</p>
<p>如果没有接显示器，可以从路由器后台查看主机名为armbian的设备ip</p>
<h2 id="2-创建tunnel">2 创建tunnel</h2>
<p>进入https://one.dash.cloudflare.com/</p>
<p>导航到<strong>Networks</strong> &gt; <strong>Tunnels</strong></p>
<p>然后<strong>Create a tunnel</strong></p>
<p>tunnel type就默认的cloudflare，然后next</p>
<p><a href="#R-image-03094f1ebab021064618eabbea39a6fa" class="lightbox-link"><img alt="image-20240928114211562" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928114211562.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-03094f1ebab021064618eabbea39a6fa"><img alt="image-20240928114211562" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928114211562.png"></a></p>
<p>然后设置tunnel name,然后save tunnel</p>
<h2 id="3-安装和配置cloudflared">3 安装和配置cloudflared</h2>
<p>**Choose an operating system:**Debian</p>
<p>**Choose an architecture:**arm64-bit</p>
<p><a href="#R-image-eb248dd1c2f8f72f684684e3b4628cfb" class="lightbox-link"><img alt="image-20240928111438949" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928111438949.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-eb248dd1c2f8f72f684684e3b4628cfb"><img alt="image-20240928111438949" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928111438949.png"></a></p>
<p>安装完成后，点击右下角save</p>
<h2 id="4-配置public-hostname">4 配置Public Hostname</h2>
<p>再回到Tunnels列表，就可以看到刚才创建的Tunnel了，拉到右边有3个点，点它会弹出配置入口<strong>Configure</strong></p>
<p>切换到<strong>Public Hostname</strong></p>
<p>Add a public hostname</p>
<p><a href="#R-image-ec463904b491ecf4090abed1a4c8add1" class="lightbox-link"><img alt="image-20240928111738284" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928111738284.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ec463904b491ecf4090abed1a4c8add1"><img alt="image-20240928111738284" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/image-20240928111738284.png"></a></p>
<p>同样，在<strong>Public hostnames</strong>列表也是点右边的3个小点进入配置</p>
<h2 id="5-设置private-network">5 设置Private Network</h2>
<p>切换到<strong>Private Network</strong></p>
<p>CIDR：192.168.3.0/24  （根据自身情况填写）</p>
<p>Description：随便</p>
<h2 id="6-回到ssh客户端">6 回到ssh客户端</h2>
<p>ssh客户端的设备也要安装cloudflared</p>
<div class="highlight wrap-code"><pre tabindex="0"><code># 注意ssh客户端所在的系统平台，下面的代码是ubuntu,amd64架构
curl -L --output cloudflared.deb https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb

sudo dpkg -i cloudflared.deb</code></pre></div><p>然后修改~/.ssh/config文件，没有就创建一个，内容如下，我这里配了两个，根据自己情况设置</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>Host ssh.456766.xyz
        ProxyCommand cloudflared access ssh --hostname %h

Host ssh.ha-box.xyz
        ProxyCommand cloudflared access ssh --hostname %h</code></pre></div><h2 id="7-ssh连接远程服务器">7 ssh连接远程服务器</h2>
<p>开启一个终端，执行</p>
<p>ssh <a href="mailto:root@ssh.ha-box.xyz" rel="external" target="_self">root@ssh.ha-box.xyz</a></p>
<p>如果一切顺利，就可以看到下面的信息</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? </code></pre></div>
<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../tags/linux/index.html">Linux</a></li>
    <li><a class="term-link" href="../tags/%E6%97%A0%E6%8D%9F%E5%88%86%E5%8C%BA/index.html">无损分区</a></li>
  </ul>
</div>
            </header>

<h1 id="linux下无损扩容分区方法">linux下无损扩容分区方法</h1>

<p>此方法适用于非lvm情景。</p>
<p>用到的命令：parted、resize2fs</p>
<p><strong>特别说明：此方法仅适用于分区扩容（包括根分区），对于缩容的情况不适用，切记！</strong></p>
<p>先确保需要扩容的目标分区后面有一段空白磁盘空间，然后使用磁盘分区工具parted先改变目标分区结束点。</p>
<p>这里假设需要扩容的分区为/dev/sda4，文件系统为ext4，挂载在根节点上，原来的分区结束点为21G ，新结束点为30G</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo parted</code></pre></div><p>这时进入parted 工具界面下，先用print /dev/sda 查看磁盘分区信息和扩容目标分区的编号</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>(parted)print /dev/sda</code></pre></div><p>假如对应的编号为4，使用命令resizepart改变扩容目标分区的结束点</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>(parted)resizepart 4 警告: 分区 /dev/sda4 正被使用。你确定要继续吗? 是/Yes/否/No? yes                                                          结束点？  [21GB]? 30GB</code></pre></div><p>回车，成功后输入quit退出parted 工具界面。</p>
<p>这时目标分区的大小已经变为了30G，但文件系统还未扩展，所以扩展的部分并不能实际使用，接下来使用命令resize2fs扩容文件系统。</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>sudo resize2fs /dev/sda4</code></pre></div><p>这时会把文件系统扩容到增加的空间上。</p>
<p>扩容目标分区完成！</p>
<p>可以使用</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>df -h sudo fdisk -l</code></pre></div><p>等命令查看。</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../tags/docker/index.html">Docker</a></li>
    <li><a class="term-link" href="../tags/docker%E9%95%9C%E5%83%8F/index.html">Docker镜像</a></li>
  </ul>
</div>
            </header>

<h1 id="从-docker-hub-快速拉取镜像">从 Docker Hub 快速拉取镜像</h1>

<p>最近一段时间 Docker 镜像一直是 Pull 不下来的状态，感觉除了挂🪜，想直连 Docker Hub 是几乎不可能的。更糟糕的是，很多原本可靠的国内镜像站，例如一些大厂和高校运营的，也陆续关停了，这对我们这些个人开发者和中小企业来说是挺难受的。之前，通过这些镜像站，我们可以快速、方便地获取所需的 Docker 镜像，现在这条路也不行了。感觉这次动作不小，以后想直接访问 Docker Hub 是不可能了。所以我们得想办法搭建自己的私有镜像仓库。</p>
<p>最近网上有很多解决 Docker Hub 镜像拉不下来的文章，我大概总结一下有以下几种办法：</p>
<h3 id="github-action">Github Action</h3>
<p>利用 Github Action Job 将 Docker Hub 镜像重新打 Tag 推送到阿里云等其他公有云镜像仓库里，这对于需要单个镜像很方便，批量就稍微麻烦一些，如果没🪜Github 访问也是个问题。</p>
<h3 id="cloudflare-worker">CloudFlare Worker</h3>
<p>使用 CloudFlare Worker 对 Docker Hub 的访问请求做中转，这种也是最近使用比较多的，因为个人用户的免费计划每天有10万次免费请求，足够个人和中小企业使用了，实在不够可以花 5$ 购买不限制的。Worker 脚本在网上有很多，随便搜索都有示例。</p>
<p>因为 CloudFlare Worker 默认分配的<code>workers.dev</code>结尾的域名国内根本解析不了，所以要把域名托管在 CloudFlare 上才能正常使用，可以购买 <code>.xyz</code> 等其他费用合适的域名专门用来做代理访问。</p>
<p>但 CloudFlare Worker CDN 经常抽风，有时很快有时很慢，可以借助<a href="https://link.segmentfault.com/?enc=U1IvsdRIl%2Fvc5gYLKxIWTQ%3D%3D.04Dv%2FTKlVsRNVeTy%2F3zonxinTdCx7VKnOwTa6fKOUXlN33sw4uIYOdE9Oajoq4mc" rel="external" target="_self">自选优选IP工具</a>帮助获取访问 CloudFlare 延迟最低的IP，将其写入到你的本地 Hosts 文件中。</p>
<h3 id="自建镜像仓库">自建镜像仓库</h3>
<p>说到自建首先我想到的就是买个配置比较低国外的服务器，搭建个 Nginx 做代理，分享下我配置成功的 Nginx 配置文件：</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>server <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  listen <span style="color:#ae81ff">443</span> ssl;
</span></span><span style="display:flex;"><span>  server_name 域名;
</span></span><span style="display:flex;"><span>  ssl_certificate 证书地址;
</span></span><span style="display:flex;"><span>  ssl_certificate_key 密钥地址;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ssl_session_timeout 24h;
</span></span><span style="display:flex;"><span>  ssl_ciphers <span style="color:#e6db74">&#39;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256&#39;</span>;
</span></span><span style="display:flex;"><span>  ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  location / <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    proxy_pass https://registry-1.docker.io;  <span style="color:#75715e"># Docker Hub 的官方镜像仓库</span>
</span></span><span style="display:flex;"><span>    proxy_set_header Host registry-1.docker.io;
</span></span><span style="display:flex;"><span>    proxy_set_header X-Real-IP $remote_addr;
</span></span><span style="display:flex;"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>    proxy_set_header X-Forwarded-Proto $scheme;
</span></span><span style="display:flex;"><span>    proxy_buffering off;
</span></span><span style="display:flex;"><span>    proxy_set_header Authorization $http_authorization;
</span></span><span style="display:flex;"><span>    proxy_pass_header  Authorization;
</span></span><span style="display:flex;"><span>    proxy_intercept_errors on;
</span></span><span style="display:flex;"><span>    recursive_error_pages on;
</span></span><span style="display:flex;"><span>    error_page <span style="color:#ae81ff">301</span> <span style="color:#ae81ff">302</span> 307 <span style="color:#f92672">=</span> @handle_redirect;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>  location @handle_redirect <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    resolver 1.1.1.1;
</span></span><span style="display:flex;"><span>    set $saved_redirect_location <span style="color:#e6db74">&#39;$upstream_http_location&#39;</span>;
</span></span><span style="display:flex;"><span>    proxy_pass $saved_redirect_location;
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span></span></span></code></pre></div><p>然后就可以直接用 <code>docker pull 域名/library/nginx:latest</code> 获取镜像了或者配置到 Docker 的<code>daemon.json</code>中。</p>
<p>Nginx 代理的方案你需要能购买到合适的国外服务器，不然网络会很慢。</p>
<p>又或者在国外服务器上搭建 Registry、Nexus、Harbor等镜像仓库，它们具备镜像缓存功能，如果私有镜像仓库中不存在则会去代理服务中获取最新镜像。</p>
<h2 id="建议方案">建议方案</h2>
<p>所以对于个人用户、中小企业来说可以将上述的 <code>CloudFlare Worker</code> + <code>自建镜像仓库</code> 融合起来，本地搭建 Registry、Nexus、Harbor等镜像仓库，在镜像仓库中配置上自己的 <code>CloudFlare Worker</code> <code>Nginx反代</code> 等代理地址或者当前一些可用的其他代理，当本地不存在则会通过这些代理去获取镜像，代理不可用时本地依然能用。</p>
<h3 id="搭建-docker-registry">搭建 Docker Registry</h3>
<p>搭建 Docker Registry 可以参考下述命令：</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -d --restart<span style="color:#f92672">=</span>always --name registry <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-p 443:443
</span></span><span style="display:flex;"><span>-e REGISTRY_PROXY_REMOTEURL<span style="color:#f92672">=</span>https://registry-1.docker.io <span style="color:#ae81ff">\ </span><span style="color:#75715e">#代理的镜像仓库URL</span>
</span></span><span style="display:flex;"><span>-e REGISTRY_HTTP_ADDR<span style="color:#f92672">=</span>0.0.0.0:443 <span style="color:#ae81ff">\ </span><span style="color:#75715e">#监听地址</span>
</span></span><span style="display:flex;"><span>-e REGISTRY_HTTP_HOST<span style="color:#f92672">=</span>https://xxx.cn <span style="color:#ae81ff">\ </span><span style="color:#75715e">#访问域名</span>
</span></span><span style="display:flex;"><span>-e REGISTRY_HTTP_TLS_CERTIFICATE<span style="color:#f92672">=</span>/opt/cert/cert.pem <span style="color:#ae81ff">\ </span><span style="color:#75715e">#域名证书</span>
</span></span><span style="display:flex;"><span>-e REGISTRY_HTTP_TLS_KEY<span style="color:#f92672">=</span>/opt/cert/cert.key <span style="color:#ae81ff">\ </span><span style="color:#75715e">#域名证书</span>
</span></span><span style="display:flex;"><span>-v /opt/cert:/opt/cert <span style="color:#ae81ff">\ </span><span style="color:#75715e">#挂载本地证书到容器中</span>
</span></span><span style="display:flex;"><span>-v /data:/var/lib/registry <span style="color:#ae81ff">\ </span><span style="color:#75715e">#持久化数据目录</span>
</span></span><span style="display:flex;"><span>registry:2</span></span></code></pre></div><h3 id="搭建-nexus">搭建 Nexus</h3>
<p>可选择使用 Docker 命令搭建 <a href="https://link.segmentfault.com/?enc=tbYJWzjSyDQsTkkURfooAQ%3D%3D.QIipXcRsUxqp02x09FrfLCPrKyA3C9SNrkeQCydZtdnSd8CC0luc36yEaTIfkJ8C" rel="external" target="_self">Nexus</a>。</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-apache" data-lang="apache"><span style="display:flex;"><span>docker run -d -p <span style="color:#ae81ff">8081</span>:8081 --name nexus sonatype/nexus3</span></span></code></pre></div><p>或者使用 <a href="https://link.segmentfault.com/?enc=FZchBOKi1qtQY8v1bnXJjw%3D%3D.pGJQ82Ux9WQpeuAt8uqme7hqNpSrSEhuAqUV%2FqA%2F0XIg0LX7UAYua15dLu6eud4ZpuMQpwD5YOON%2FtiFc1AQ2A%3D%3D" rel="external" target="_self">Rainbond</a> 应用商店一键安装。</p>
<p><a href="#R-image-996ad2b3ea66363c964e13a617c16a1e" class="lightbox-link"><img alt="preview" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/view" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-996ad2b3ea66363c964e13a617c16a1e"><img alt="preview" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/view"></a></p>
<p>搭建完成后正常登录 Nexus 页面，根据页面引导配置 Docker 相关的存储 Repository 及代理 Repository 即可。</p>
<h3 id="搭建-harbor">搭建 Harbor</h3>
<p>可参考 <a href="https://link.segmentfault.com/?enc=gArRPFlTwahPHAZVYax5eQ%3D%3D.nEIXf3i42IPUpjQpS0rCTWWuYuZuTijmAc5tYh0b0JQ6Rpq%2FgSXPBgpsoxHhenn2" rel="external" target="_self">Harbor文档 </a>搭建或者使用 <a href="https://link.segmentfault.com/?enc=Y8%2FkX9dQK4wkXs1osqCq2Q%3D%3D.Y4NBA%2Fwcm2hd3jymDG3IHKxzC%2BwC7C2hOmQohmPoWdDa6NnnhnrlgpZirSzWOz3yAO6WgEWO0ylpmxJECRtUIw%3D%3D" rel="external" target="_self">Rainbond</a> 应用商店一键安装。</p>
<p><a href="#R-image-4c163bcf1e6c58e2f7cff9f0909abc63" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/1460000044981234" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4c163bcf1e6c58e2f7cff9f0909abc63"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/1460000044981234"></a></p>
<h2 id="可用的镜像代理">可用的镜像代理</h2>
<p>最近十来天我尝试了很多镜像加速站，整理了以下镜像站目前是可用状态，但可能随时会遇到不可用、关停、访问比较慢的状态，建议同时配置多个镜像源。</p>
<table>
  <thead>
      <tr>
          <th>提供商</th>
          <th>地址</th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>DaoCloud</td>
          <td><a href="https://link.segmentfault.com/?enc=FSVjLEsAl%2BdE5y3PPpNn8A%3D%3D.YeXBE%2BxvQ2xpkz0ywiznVXQZgniCO%2F0UAWWsB8Hz0Ew%3D" rel="external" target="_self">https://docker.m.daocloud.io</a></td>
          <td></td>
      </tr>
      <tr>
          <td>阿里云</td>
          <td>https://&lt;your_code&gt;.mirror.aliyuncs.com</td>
          <td>登录阿里云分配</td>
      </tr>
      <tr>
          <td>Docker镜像代理</td>
          <td><a href="https://link.segmentfault.com/?enc=wA9sAMd44Ba%2Bi30i4AX3FA%3D%3D.CIFcbiu06gjjTJAWrPMEZBf%2FwCqfboXDjh%2F4%2FPMmdgo%3D" rel="external" target="_self">https://dockerproxy.com</a></td>
          <td>看运气</td>
      </tr>
      <tr>
          <td>百度云</td>
          <td><a href="https://link.segmentfault.com/?enc=uAfmeE%2FpgUjanDGQSRa9%2BQ%3D%3D.6DfuXOO%2BwVfSCE8RpPZ1IDN%2FSil9v%2Bp9629FU8D34pE%3D" rel="external" target="_self">https://mirror.baidubce.com</a></td>
          <td></td>
      </tr>
      <tr>
          <td>南京大学</td>
          <td><a href="https://link.segmentfault.com/?enc=5TaR9nfjwb%2Ba5BhvoDCvWA%3D%3D.r5H9%2FnalPnIXdJ5CTEr7fhUShCdG%2FMmshkQK47MBrUk%3D" rel="external" target="_self">https://docker.nju.edu.cn</a></td>
          <td></td>
      </tr>
      <tr>
          <td>中科院</td>
          <td><a href="https://link.segmentfault.com/?enc=cpT%2F3jwu8dEoJH47fNtChA%3D%3D.nol19sC4qbKlJ%2BaLFcEkhzXWkFjdmZ9mzR6fg4gCOKY%3D" rel="external" target="_self">https://mirror.iscas.ac.cn</a></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h2 id="福利">福利</h2>
<p>近期 Rainbond 社区也接受到许多用户反馈 Docker 镜像拉不下来，不能构建、打包了，因此 Rainbond 也搭建了个镜像加速服务，采用 <code>CloudFlare + 国外服务器 Nginx 反代</code>的方案为 Rainbond 社区的用户们提供镜像加速服务。</p>
<p><a href="#R-image-3bc96ef7016812132098cac688bc1231" class="lightbox-link"><img alt="img" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/2261433068-091e79c93c8fa759" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3bc96ef7016812132098cac688bc1231"><img alt="img" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/2261433068-091e79c93c8fa759"></a></p>
<p>目前速度挺快的（未来不好说</p>
<h3 id="使用方法">使用方法</h3>
<p>1.直接获取 Docker Hub 镜像</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker pull docker.rainbond.cc/library/node:20
</span></span><span style="display:flex;"><span>docker pull docker.rainbond.cc/rainbond/rainbond:v5.17.2-release-allinone</span></span></code></pre></div><p>2.配置镜像加速器</p>
<div class="highlight wrap-code"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>tee /etc/docker/daemon.json <span style="color:#e6db74">&lt;&lt;-&#39;EOF&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">{
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">  &#34;registry-mirrors&#34;: [&#34;https://docker.rainbond.cc&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">}
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>systemctl daemon-reload
</span></span><span style="display:flex;"><span>systemctl restart docker</span></span></code></pre></div>
<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          <article class="default">
            <header class="headline">
<div class=" taxonomy-tags term-list cstyle  tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../tags/cloudflare-worker/index.html">Cloudflare Worker</a></li>
    <li><a class="term-link" href="../tags/%E5%85%8D%E8%B4%B9%E8%8A%82%E7%82%B9/index.html">免费节点</a></li>
  </ul>
</div>
            </header>

<h1 id="搭建免费科学上网节点">搭建免费科学上网节点</h1>

<p>Cloudflare好像发布了新的用户协议，不让搞代理了。这个按教程部署完，访问时抛出522的错误，但是之前部署的还可以用</p>
<p>请参考<a href="../network/free-vless-node-page/index.html">Cloudflare Page搭建免费科学上网节点</a> 来搭建，这种方式还可以用</p>
<h2 id="准备物料">准备物料</h2>
<h2 id="1域名一个">1)域名一个</h2>
<p>推荐到<a href="https://www.namesilo.com/" rel="external" target="_self">namesilo.com</a>注册域名，安全、支持支付宝支付、价格便宜，没有陷阱。</p>
<p>注册6位及以上数字的xyz域名（比如456766.xyz），只要$0.99，续费$0.99，注册+续费它9年才$10不到，不用担心域名过期。这也是仅有的成本，简直不要太安逸了。</p>
<h3 id="2准备好cloudflare账号备用">2)准备好Cloudflare账号备用</h3>
<p>打开https://www.cloudflare.com/zh-cn，通过一个电子邮件地址即可注册Cloudflare账号</p>
<h3 id="3准备代码">3)准备代码</h3>
<p><a href="https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js" rel="external" target="_self">https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js</a></p>
<p><a href="https://4i5i-my.sharepoint.com/:u:/g/personal/sosel_4i5i_onmicrosoft_com/EQr1zW3GUINKptRic9MlSKIBOmUXEukBXOzK6oq-ED0QQQ?e=cTDsBR" rel="external" target="_self">备用地址</a> （如果你打开不github的话，可以试试从onedrive下载worker-vless.js文件）</p>
<h2 id="在cloudflare添加网站">在Cloudflare添加网站</h2>
<p>登陆Cloudflare，然后添加网站，就是将你刚注册的域名添加到这里</p>
<p><a href="#R-image-248db46c0c33d52674843afdd9fce642" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/b1c3498eee818656643b898a86c72fcd77eaabd3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-248db46c0c33d52674843afdd9fce642"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/b1c3498eee818656643b898a86c72fcd77eaabd3.png"></a></p>
<p>然后选择<strong>免费</strong>的方案就行，如下图，然后<strong>继续</strong></p>
<p><a href="#R-image-9b84fddc1414358cfeac9837cc5a1cb2" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/90241e3e480226358c120d6be86510c2587b268f.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-9b84fddc1414358cfeac9837cc5a1cb2"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/90241e3e480226358c120d6be86510c2587b268f.png"></a></p>
<p>此时我们先不添加DNS，先把域名解析服务器改到Cloudflare，点击左边栏 <strong>DNS</strong>，记下Cloudflare名称服务器地址，你看到的可能和我看到不一定一样，别弄错了。</p>
<p><a href="#R-image-20064a392115004ed3bd883da4bc8fa8" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/619ee5212f9f721c3c60ba3ad41a855f02ccc158.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-20064a392115004ed3bd883da4bc8fa8"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/619ee5212f9f721c3c60ba3ad41a855f02ccc158.png"></a></p>
<p>去域名注册平台后台https://www.namesilo.com/account_domains.php</p>
<p><a href="#R-image-900577938a14319b8bfa4e8b4b706d72" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/deaa5b81ad3bc0b61f0a99b1b3309a98d8ef4a77.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-900577938a14319b8bfa4e8b4b706d72"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/deaa5b81ad3bc0b61f0a99b1b3309a98d8ef4a77.jpeg"></a></p>
<p>填入Cloudflare的名称服务器地址，然后提交（submit），名称服务器生效可能要等一段时间</p>
<p><a href="#R-image-892997d72b95800915fbe2ea7d0ec063" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/73fd0ce7fd47d3e25d5035f6af78106fd531509a.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-892997d72b95800915fbe2ea7d0ec063"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/73fd0ce7fd47d3e25d5035f6af78106fd531509a.png"></a></p>
<h2 id="创建应用程序">创建应用程序</h2>
<p>回到Cloudflare，导航到<strong>Workers 和 Pages</strong> 创建应用程序</p>
<p><a href="#R-image-d7e241a37889dd00fad108ee3d304aec" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/6202273f3867236110d6a2a3e9d4a48ba7b52446.jpeg" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d7e241a37889dd00fad108ee3d304aec"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/6202273f3867236110d6a2a3e9d4a48ba7b52446.jpeg"></a></p>
<p><a href="#R-image-3103df6ea1ed69604b7e44891c1844e2" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/04affed533e6f7184b4c7420b8e3e3f2cb46e6b0.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3103df6ea1ed69604b7e44891c1844e2"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/04affed533e6f7184b4c7420b8e3e3f2cb46e6b0.png"></a></p>
<p>名称可以随意，完了点击部署按钮，代码先不管它</p>
<p><a href="#R-image-355c332e2642e0c1cd450db13de62978" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/045bcecb3b15412597fef3db606a8de38b5b7c9e.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-355c332e2642e0c1cd450db13de62978"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/045bcecb3b15412597fef3db606a8de38b5b7c9e.png"></a></p>
<p>Worker部署成功</p>
<p><a href="#R-image-7e759cec1b877165842eb3831eccce9f" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/d592ffaed5f33e6bc9bdadb89267e73e87d09aeb.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7e759cec1b877165842eb3831eccce9f"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/d592ffaed5f33e6bc9bdadb89267e73e87d09aeb.png"></a></p>
<h2 id="替换脚本代码">替换脚本代码</h2>
<p>点击编辑代码，将https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js代码复制过来，贴到编辑器里面替换原来的内容</p>
<p>修改两个地方：</p>
<p>1，第7行的userID，随便找个UUID替换，<a href="https://www.uuidgenerator.net/version4" rel="external" target="_self">点击这里获取一个 4</a>，注意用version4，否则会报UUID不合法。</p>
<p>2，第9行的proxyIP，可以找前辈们提供的，随便在下面的列表中找一个</p>
<div class="highlight wrap-code"><pre tabindex="0"><code>cdn-all.xn--b6gac.eu.org cdn.xn--b6gac.eu.org cdn-b100.xn--b6gac.eu.org edgetunnel.anycast.eu.org cdn.anycast.eu.org</code></pre></div><p><em>userID不用改也行 ，userID记在小本本上以后要用</em></p>
<p>proxyIP<em>我测试了也可以不用改，空着就行</em></p>
<p><strong>保存并部署</strong>（按钮在屏幕右上角）</p>
<h2 id="绑定域名">绑定域名</h2>
<p><a href="#R-image-d09c74637450cfbeed40d6b56b4f9476" class="lightbox-link"><img alt="notion image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/42db9218a49c38b1e5fc04f5a965596776ad3be3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-d09c74637450cfbeed40d6b56b4f9476"><img alt="notion image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/42db9218a49c38b1e5fc04f5a965596776ad3be3.png"></a></p>
<p><a href="#R-image-7eec74d0ee5c936d491e339951db1860" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/67c86bffc006e2047714fe596cd6d07f63abae6f.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7eec74d0ee5c936d491e339951db1860"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/67c86bffc006e2047714fe596cd6d07f63abae6f.png"></a></p>
<p>自定义域前缀可以随意，根据自己需要填写然后点击“添加自定义域”，等一会儿生效后就可以用了。。。</p>
<h2 id="配置科学上网客户端">配置科学上网客户端</h2>
<p>在浏览器地址栏输入你刚配置的自定义域+代码中配置的userID，得到相应的科学上网的配置参数</p>
<p>比如：https://hi.cntv.chat/6efcf080-745f-42c0-a0e6-4b0f9a2f8f1c</p>
<p><a href="#R-image-445881794161fab6084c1e4ecfa7d0f3" class="lightbox-link"><img alt="image" class="noborder lazy lightbox noshadow figure-image" loading="lazy" src="https://pic.456766.xyz/typora/a762dcabf2d2ef2fd003f3bec59942c9ae2d21f0.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-445881794161fab6084c1e4ecfa7d0f3"><img alt="image" class="noborder lazy lightbox noshadow lightbox-image" loading="lazy" src="https://pic.456766.xyz/typora/a762dcabf2d2ef2fd003f3bec59942c9ae2d21f0.png"></a></p>
<p>复制图上标记的内容，到科学上网工具中通过剪贴板导入或手动输入配置参数，注意协议是VLESS。我PC端用的V2rayA，安卓手机用的V2rayNG</p>
<p>好了，本教程到此结束，快去享受免费、快速的、自由的网络去吧！</p>
<p>若有不明白或遇到什么问题，请给我留言。</p>

<script
  id="utteranc"
  src="https://utteranc.es/client.js"
  repo="cntv-chat/ha-box"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async
></script>
<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
    const theme = document.body.className.includes("dark")
      ? "github-light"
      : "photon-dark";
    const message = {
      type: "set-theme",
      theme: theme,
    };
    const utteranc = document.querySelector(".utterances-frame");
    utteranc.contentWindow.postMessage(message, "https://utteranc.es");
  });
</script>


            <footer class="footline">
            </footer>
          </article>

          </section>
        </div>
      </main>
    </div>
    <script src="../js/clipboard.min.js?1743123307" defer></script>
    <script src="../js/perfect-scrollbar.min.js?1743123307" defer></script>
    <script src="../js/theme.js?1743123307" defer></script>


  </body>
</html>


